function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/CodeEditor-CD55KwgY.js","assets/index-BsqTatlD.js","assets/vendor-BGjp6CLF.js","assets/index-DrMS6Spr.css","assets/SyntaxHighlighter-zfn4dlGl.js","assets/index-3075s8gv.js","assets/textarea-C9KfXW0I.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{H as Xn,r as I,j as p,I as et,J as Dt,u as Bt,K as Ot}from"./vendor-BGjp6CLF.js";import{c as Rt,u as Fe,h as Ve,J as Ht,i as $t,w as Vt,S as qt,j as Wt,k as Ut,l as Qt,m as jn,v as fe,D as Zt,b as Gt,K as Jt,e as Kt,L as Yt,M as Xt,f as Re,N as er,O as nr,Q as nt,R as tr,U as rr,V as tt,W as rt,X as ir,Y as ar,Z as it,_ as at,a0 as sr,o as or,a as Cn,B as je,a1 as st,a2 as ot,a3 as lt,a4 as lr,a5 as ur,a6 as cr,a7 as hr,a8 as dr,a9 as fr,aa as mr,T as pr,ab as gr,ac as xr,g as br,y as kr,A as yr,z as wr}from"./textarea-C9KfXW0I.js";import{T as Ae,a as Te,b as Le,d as Sr,_ as xn,c as we,e as jr,u as Cr,M as zr}from"./index-BsqTatlD.js";/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Er=Rt("MessageCircleMore",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}],["path",{d:"M8 12h.01",key:"czm47f"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M16 12h.01",key:"1l6xoz"}]]);function ut(e,t){if(typeof document>"u")return;const n=document.createElement("textarea");n.value=e,n.setAttribute("readonly",""),n.style={position:"absolute",left:"-9999px"},document.body.appendChild(n);const r=document.getSelection().rangeCount>0?document.getSelection().getRangeAt(0):!1;n.select();let i=!1;try{i=!!document.execCommand("copy")}catch{i=!1}document.body.removeChild(n),r&&document.getSelection&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(r)),t&&t(i)}function Ir(){const t=Xn().id??"new",n=Fe(Ve({id:t})),[r,i]=I.useState(!1),[a,s]=I.useState();return I.useEffect(()=>{r&&Ht(t,n).then(()=>{ut(document.location.href.replace("/ai","/ai/shared"))}).catch(o=>{console.error("Share error",o),s(o.toString())})},[t,n,r]),p.jsxs($t,{onOpenChange:o=>i(o),children:[p.jsx(Vt,{asChild:!0,children:p.jsx("button",{type:"button","aria-label":"Share",className:"flex items-center border-l px-3 text-sm text-secondary-foreground hover:bg-background",children:p.jsx(qt,{})})}),p.jsxs(Wt,{className:"sm:max-w-[425px]",children:[p.jsxs(Ut,{children:[p.jsx(Qt,{children:"Share"}),a?p.jsx(jn,{className:"mb-2 text-red-500 dark:text-red-400",children:a}):p.jsx(jn,{children:"Copy the link below to share your creation"})]}),p.jsx("div",{className:"items-center",children:p.jsx("input",{type:"text",value:document.location.href.replace("/ai","/ai/shared"),className:"w-full p-3"})})]})]})}function Ke({mode:e="html",error:t,loading:n=!1}){const r=n?"animate-pulse":"";return t?p.jsx("div",{className:"mx-auto mt-10 max-w-[80%]",children:p.jsx("div",{className:"bg-secondary text-black dark:text-white",children:p.jsxs("div",{role:"alert",className:"relative mb-2 rounded border-l-4 border-red-500 p-4",children:[p.jsx("strong",{className:"font-bold",children:"Error! "}),p.jsx("span",{className:"block sm:inline",children:t})]})})}):p.jsxs("div",{className:"mx-auto max-w-lg",children:[" ",p.jsxs("div",{role:"status",className:`my-7 ${r}`,children:[" ",p.jsx("div",{className:"mb-4 h-2.5 w-48 rounded-full bg-zinc-300 dark:bg-zinc-700"}),p.jsx("div",{className:"mb-2.5 h-2 max-w-[460px] rounded-full bg-zinc-200 dark:bg-zinc-700"}),p.jsx("div",{className:"mb-2.5 h-2 max-w-[500px] rounded-full bg-zinc-200 dark:bg-zinc-700"}),p.jsx("div",{className:"mb-2.5 h-2 max-w-[450px] rounded-full bg-zinc-200 dark:bg-zinc-700"}),p.jsx("div",{className:"mb-2.5 h-2 max-w-[380px] rounded-full bg-zinc-200 dark:bg-zinc-700"}),p.jsx("div",{className:"h-2 max-w-[460px] rounded-full bg-zinc-200 dark:bg-zinc-700"}),p.jsx("span",{className:"sr-only",children:"Loading..."})," "]}),e==="html"&&p.jsxs("div",{role:"status",className:`mb-7 max-w-lg ${r}`,children:[" ",p.jsxs("div",{className:"flex h-48 w-full items-center justify-center rounded bg-zinc-300 dark:bg-zinc-700",children:[" ",p.jsx("svg",{className:"h-12 w-12 text-gray-200",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",fill:"currentColor",viewBox:"0 0 640 512",children:p.jsx("path",{d:"M480 80C480 35.82 515.8 0 560 0C604.2 0 640 35.82 640 80C640 124.2 604.2 160 560 160C515.8 160 480 124.2 480 80zM0 456.1C0 445.6 2.964 435.3 8.551 426.4L225.3 81.01C231.9 70.42 243.5 64 256 64C268.5 64 280.1 70.42 286.8 81.01L412.7 281.7L460.9 202.7C464.1 196.1 472.2 192 480 192C487.8 192 495 196.1 499.1 202.7L631.1 419.1C636.9 428.6 640 439.7 640 450.9C640 484.6 612.6 512 578.9 512H55.91C25.03 512 .0006 486.1 .0006 456.1L0 456.1z"})})," "]}),p.jsx("span",{className:"sr-only",children:"Loading..."})," "]}),p.jsxs("div",{role:"status",className:`my-6 ${r}`,children:[" ",p.jsx("div",{className:"mb-2.5 h-2 max-w-[460px] rounded-full bg-zinc-200 dark:bg-zinc-700"}),p.jsx("div",{className:"mb-2.5 h-2 max-w-[450px] rounded-full bg-zinc-200 dark:bg-zinc-700"}),p.jsx("div",{className:"mb-2.5 h-2 max-w-[460px] rounded-full bg-zinc-200 dark:bg-zinc-700"}),p.jsx("div",{className:"mb-2.5 h-2 max-w-[500px] rounded-full bg-zinc-200 dark:bg-zinc-700"}),p.jsx("div",{className:"mb-2.5 h-2 max-w-[450px] rounded-full bg-zinc-200 dark:bg-zinc-700"}),p.jsx("div",{className:"mb-2.5 h-2 max-w-[380px] rounded-full bg-zinc-200 dark:bg-zinc-700"}),p.jsx("div",{className:"h-2 max-w-[460px] rounded-full bg-zinc-200 dark:bg-zinc-700"}),p.jsx("span",{className:"sr-only",children:"Loading..."})," "]}),p.jsxs("div",{role:"status",className:`my-6 ${r}`,children:[" ",p.jsx("div",{className:"mb-2.5 h-2 max-w-[460px] rounded-full bg-zinc-200 dark:bg-zinc-700"}),p.jsx("div",{className:"mb-2.5 h-2 max-w-[450px] rounded-full bg-zinc-200 dark:bg-zinc-700"}),p.jsx("div",{className:"mb-2.5 h-2 max-w-[460px] rounded-full bg-zinc-200 dark:bg-zinc-700"}),p.jsx("div",{className:"mb-2.5 h-2 max-w-[500px] rounded-full bg-zinc-200 dark:bg-zinc-700"}),p.jsx("span",{className:"sr-only",children:"Loading..."})," "]}),p.jsxs("div",{role:"status",className:`mb-6 mt-7 ${r}`,children:[" ",p.jsx("div",{className:"mb-4 h-2.5 w-48 rounded-full bg-zinc-300 dark:bg-zinc-700"}),p.jsx("div",{className:"mb-2.5 h-2 max-w-[460px] rounded-full bg-zinc-200 dark:bg-zinc-700"}),p.jsx("div",{className:"mb-2.5 h-2 max-w-[450px] rounded-full bg-zinc-200 dark:bg-zinc-700"}),p.jsx("div",{className:"mb-2.5 h-2 max-w-[460px] rounded-full bg-zinc-200 dark:bg-zinc-700"}),p.jsx("div",{className:"mb-2.5 h-2 max-w-[500px] rounded-full bg-zinc-200 dark:bg-zinc-700"}),p.jsx("div",{className:"mb-2.5 h-2 max-w-[450px] rounded-full bg-zinc-200 dark:bg-zinc-700"}),p.jsx("div",{className:"mb-2.5 h-2 max-w-[380px] rounded-full bg-zinc-200 dark:bg-zinc-700"}),p.jsx("div",{className:"mb-2.5 h-2 max-w-[460px] rounded-full bg-zinc-200 dark:bg-zinc-700"}),p.jsx("div",{className:"mb-2.5 h-2 max-w-[500px] rounded-full bg-zinc-200 dark:bg-zinc-700"}),p.jsx("div",{className:"h-2 max-w-[460px] rounded-full bg-zinc-200 dark:bg-zinc-700"}),p.jsx("span",{className:"sr-only",children:"Loading..."})," "]}),p.jsxs("div",{role:"status",className:`my-6 ${r}`,children:[" ",p.jsx("div",{className:"mb-2.5 h-2 max-w-[460px] rounded-full bg-zinc-200 dark:bg-zinc-700"}),p.jsx("div",{className:"mb-2.5 h-2 max-w-[450px] rounded-full bg-zinc-200 dark:bg-zinc-700"}),p.jsx("span",{className:"sr-only",children:"Loading..."})," "]})]})}Ke.defaultProps={error:void 0,mode:"html"};const vr=I.lazy(async()=>xn(()=>import("./CodeEditor-CD55KwgY.js"),__vite__mapDeps([0,1,2,3])));function Nr(e,t){const n=new RegExp(Object.keys(t).join("|"),"g");return e.replace(n,r=>t[r.toLowerCase()])}function Ar(e){return`export default function Widget() {
    return (
${Nr(e,{"class=":"className=","for=":"htmlFor=","-rule":"Rule","stroke-l":"strokeL","stroke-w":"strokeW","<!--":"{/*","-->":"*/}",tabindex:"tabIndex",colspan:"colSpan:",rowspan:"rowSpan:","aria-*":"aria-*","data-*":"data-*",onclick:"onClick",onchange:"onChange",onblur:"onBlur"}).split(`
`).map(r=>`        ${r}`).join(`
`)}
    )
}`}function Tr({id:e,code:t,shared:n}){const r=Fe(Ve({id:e})),[i,a]=fe(nr),[s,o]=fe(nt),[h,l]=I.useState(t);I.useEffect(()=>{var u;l(i==="jsx"?Ar(t):i==="html"?t:((u=r.components)==null?void 0:u[i])??"Loading...")},[i,t,r.components]),I.useEffect(()=>{s&&a(s)},[s,a]);const f=["html"];return r.components?f.push(...Object.keys(r.components)):f.push("jsx"),p.jsx("div",{className:"code-syntax-wrapper",children:p.jsxs("div",{className:"code-syntax relative border",children:[p.jsxs("div",{className:"grid w-full grid-cols-2 rounded-t-md border-b",children:[p.jsxs("ul",{className:"flex text-center text-sm font-medium text-gray-500 dark:text-gray-400",children:[f.map(u=>p.jsx("li",{children:p.jsx("button",{type:"button",onClick:()=>a(u),className:`inline-block w-full border-r p-2 px-3 text-secondary-foreground ${u===i?"bg-background":"bg-secondary hover:bg-background"}`,children:u.toUpperCase()})},u)),p.jsx("li",{children:p.jsxs(Zt,{children:[p.jsx(Gt,{asChild:!0,children:p.jsx("button",{type:"button","aria-label":"Convert HTML to a framework",className:"inline-block w-full border-r bg-secondary p-[10px] text-secondary-foreground hover:bg-background",children:p.jsxs(Ae,{children:[p.jsx(Te,{asChild:!0,children:p.jsx(Jt,{})}),p.jsx(Le,{side:"bottom",children:"Convert HTML to a framework"})]})})}),p.jsxs(Kt,{side:"top",children:[p.jsx(Yt,{children:"Convert to"}),p.jsx(Xt,{}),p.jsx(Re,{onClick:()=>{o("web component")},children:"Web Component"}),p.jsx(Re,{onClick:()=>{o("react")},children:"React"}),p.jsx(Re,{onClick:()=>{o("preact")},children:"Preact"}),p.jsx(Re,{onClick:()=>{o("svelte")},children:"Svelte"}),p.jsx(Re,{onClick:()=>{o("vue")},children:"Vue"})]})]})},"new")]}),p.jsxs("div",{className:"flex justify-end",children:[e!=="new"&&!n&&p.jsx(Ir,{}),p.jsx("button",{type:"button","aria-label":"Download",onClick:()=>{const u=i==="html"?".html":".js";Sr(t,i==="html"?"text/html":"application/javascript",`${r.name}${u}`)},className:"flex items-center border-l px-3 text-sm text-secondary-foreground hover:bg-background",children:p.jsx(er,{})}),p.jsxs("button",{type:"button",onClick:()=>ut(h),className:"flex items-center border-l px-3 text-sm text-secondary-foreground hover:bg-background",children:[p.jsxs("svg",{className:"mr-2 h-3.5 w-3.5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 18 20",children:[p.jsx("path",{d:"M5 9V4.13a2.96 2.96 0 0 0-1.293.749L.879 7.707A2.96 2.96 0 0 0 .13 9H5Zm11.066-9H9.829a2.98 2.98 0 0 0-2.122.879L7 1.584A.987.987 0 0 0 6.766 2h4.3A3.972 3.972 0 0 1 15 6v10h1.066A1.97 1.97 0 0 0 18 14V2a1.97 1.97 0 0 0-1.934-2Z"}),p.jsx("path",{d:"M11.066 4H7v5a2 2 0 0 1-2 2H0v7a1.969 1.969 0 0 0 1.933 2h9.133A1.97 1.97 0 0 0 13 18V6a1.97 1.97 0 0 0-1.934-2Z"})]})," ",p.jsx("span",{className:"copy-text",children:"Copy"})]})]})]}),p.jsx("div",{className:"relative bg-zinc-50 dark:bg-zinc-900",children:p.jsx("div",{className:"max-h-[24vh] overflow-scroll pb-8 text-sm",tabIndex:-1,children:p.jsx(I.Suspense,{fallback:p.jsx(Ke,{loading:!0}),children:t?p.jsx(vr,{code:h,framework:i}):void 0})})})]})})}function ct({className:e,style:t,callback:n}){const r=["Create a responsive navigation bar with dropdown menus, using a dark theme.","I need a user profile card with an avatar, name, and social media links in Tailwind CSS.","Generate a modal popup for user feedback, including text area and submit button.","Can you make a pricing table with three tiers, highlighting the best value tier?","Build a responsive image gallery grid that supports lightbox viewing.","I'm looking for a login form with email and password fields, plus a remember me checkbox.","Design a newsletter signup section with an input field and a subscribe button, featuring a minimalist aesthetic.","Create a footer with columns for links, a brief about section, and social media icons.","Generate a dashboard layout with a sidebar navigation, header, and content area.","I need an accordion FAQ section where questions expand to show answers on click.","Produce a blog post template with a featured image, title, date, author, and content area.","Design a to-do list app interface with tasks, checkboxes, and an add task form.","Create a progress bar component that shows percentage completion and can be styled dynamically.","Generate a contact form with name, email, message fields, and a send button, with validation styles.","Design a carousel slider for featured articles with previous and next controls, using a sleek, modern look.","Create a set of social share buttons with icons for Facebook, Twitter, LinkedIn, and Instagram, with a hover effect.","Generate a responsive table with sortable columns, row highlight on hover, and pagination.","I need a card layout for product listings, including an image, title, price, and 'Add to Cart' button.","Build a timeline component for displaying a project's milestones, with vertical lines and circular markers.","Design a weather widget showing the current temperature, weather condition icons, and a 5-day forecast.","Create an alert component with success, warning, and error variations that can be dismissed.","Generate a multi-step form for a checkout process, including progress indicators.","I'm looking for a tab component with horizontal navigation and dynamically loaded content.","Design a search bar with autocomplete suggestions that appear as the user types.","Create a sticky header that becomes visible when scrolling up and hides on scrolling down.","Generate a set of animated loading spinners with different styles for asynchronous data loading.","I need a grid of cards for team members, including photo, name, role, and a short bio, with a flip effect on hover.","Build a testimonial slider with quotes from customers, including their names and photos.","Design a date picker component that integrates with a form and supports range selection.","Generate a set of badges for different status levels like New, In Progress, and Completed, with customizable colors."],[i,a]=I.useState([]);return I.useEffect(()=>{const s=new Set;for(;s.size<3;)s.add(Math.floor(Math.random()*r.length));a([...s])},[r.length]),p.jsxs("div",{className:we(e,"flex flex-wrap items-center justify-center gap-2 transition-all duration-500"),style:t,children:[p.jsx("button",{onClick:()=>n(r[i[0]]),type:"button",className:"w-xs min-w-xs max-w-xs cursor-pointer truncate rounded-full bg-gradient-to-r from-teal-400 to-blue-500 px-4 py-2 text-white transition-all hover:from-teal-500 hover:to-blue-600",children:p.jsx("span",{className:"transition-all hover:-ml-96 hover:mr-36",style:{transitionDuration:"3000ms"},children:r[i[0]]})}),p.jsx("button",{onClick:()=>n(r[i[1]]),type:"button",className:"w-xs min-w-xs max-w-xs cursor-pointer truncate rounded-full bg-gradient-to-r from-purple-400 to-pink-500 px-4 py-2 text-white transition-all hover:from-purple-500 hover:to-pink-600",children:p.jsx("span",{className:"transition-all hover:-ml-96 hover:mr-36",style:{transitionDuration:"3000ms"},children:r[i[1]]})}),p.jsx("button",{onClick:()=>n(r[i[2]]),type:"button",className:"w-xs min-w-xs max-w-xs cursor-pointer truncate rounded-full bg-gradient-to-r from-yellow-400 to-orange-500 px-4 py-2 text-white transition-all hover:from-yellow-500 hover:to-orange-600",children:p.jsx("span",{className:"transition-all hover:-ml-96 hover:mr-36",style:{transitionDuration:"3000ms"},children:r[i[2]]})})]})}ct.defaultProps={className:"",style:{}};const Lr=tr,Mr=rr,Fr=sr,ht=I.forwardRef(({className:e,...t},n)=>p.jsx(tt,{className:we("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));ht.displayName=tt.displayName;const Pr=or("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),dt=I.forwardRef(({side:e="right",className:t,children:n,...r},i)=>p.jsxs(Fr,{children:[p.jsx(ht,{}),p.jsxs(rt,{ref:i,className:we(Pr({side:e}),t),...r,children:[n,p.jsxs(ir,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[p.jsx(ar,{className:"h-4 w-4"}),p.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));dt.displayName=rt.displayName;const ft=({className:e,...t})=>p.jsx("div",{className:we("flex flex-col space-y-2 text-center sm:text-left",e),...t});ft.displayName="SheetHeader";const mt=I.forwardRef(({className:e,...t},n)=>p.jsx(it,{ref:n,className:we("text-lg font-semibold text-foreground",e),...t}));mt.displayName=it.displayName;const pt=I.forwardRef(({className:e,...t},n)=>p.jsx(at,{ref:n,className:we("text-sm text-muted-foreground",e),...t}));pt.displayName=at.displayName;function _r({callback:e}){const[t,n]=I.useState(!1);return p.jsx("div",{className:"flex h-full items-center bg-background",onKeyPress:r=>{r.key==="Enter"&&e(!0)},onClick:()=>e(!0),role:"button",tabIndex:0,children:p.jsxs("label",{htmlFor:"file-input",className:"relative mx-auto h-64 w-64 cursor-pointer rounded-lg bg-white p-4 text-center text-zinc-600 shadow-lg dark:bg-zinc-800",onDragEnter:()=>n(!0),onDragExit:()=>n(!1),onDrop:r=>{r.preventDefault(),n(!1);let i;if(r.dataTransfer.items.length>0){for(const a of r.dataTransfer.items)if(a.kind==="file"){if(i=a.getAsFile(),i!=null&&i.type.startsWith("image/"))break;i=void 0}}else for(const a of r.dataTransfer.files){if(a.type.startsWith("image/"))break;i=void 0}r.dataTransfer.clearData(),i?(console.log("Got file type",i.type),e(!1,i)):alert("Only images are supported")},onDragOver:r=>{r.preventDefault()},children:[p.jsx("div",{className:"mb-5 text-6xl",children:"ðŸ“¸"}),p.jsx("span",{className:"text-lg",children:"Drag a screenshot of UI or click me to upload one."}),p.jsx("div",{className:"mt-2 text-sm",children:"You can also just explain what you want in the text box below."}),p.jsx("div",{className:we("absolute inset-0 h-full w-full rounded-lg border-2 border-dashed border-zinc-400 bg-transparent",t&&"border-zinc-100")})]})})}const Dr=I.lazy(async()=>xn(()=>import("./SyntaxHighlighter-zfn4dlGl.js"),__vite__mapDeps([4,2,1,3]))),Br=I.lazy(async()=>xn(()=>import("./index-3075s8gv.js"),__vite__mapDeps([5,2,6,1,3])));function Or(e){const t="    ";let n="",r="";for(const i of e.split(/>\s*</))/^\/\w/.test(i)&&(r=r.slice(t.length)),n+=`${r}<${i}>
`,/^<?\w[^>]*[^/]$/.test(i)&&!i.startsWith("input")&&(r+=t);return n.slice(1,-2)}function Rr(e,t){const n=[];for(let r=0;r<e.length;r+=t)n.push(e.slice(r,r+t));return n}function Hr(e){const n=(e.markdown??"").split(`---

`);n[0].includes("name: ")&&n.shift();let{prompt:r}=e;return n.map(i=>{const a=i.replace(/---\nprompt:.+\n/m,""),s=`### ${r}

`,o=i.split(`---
`);return(o[1]||"").startsWith("prompt:")&&(r=o[1].replace("prompt:","").trim()),i.startsWith("<")?`${s}\`\`\`html
${a}
\`\`\``:s+a}).join(`
`)}function gt({html:e,error:t,js:n,id:r,rendering:i,imageUploadRef:a}){let s=document.location.hostname.endsWith("github.dev")?"https://wandb.github.io":"http://127.0.0.1:7878";const o=I.useRef(null),h=Fe(Ve({id:r})),l=Cn(st),f=Cn(ot),[u,g]=fe(lt),[c,E]=fe(lr),[T,M]=I.useState(!1),[k,P]=I.useState(!1),[y,D]=I.useState(),[H,b]=I.useState("desktop");return I.useLayoutEffect(()=>{E(window.matchMedia("(prefers-color-scheme: dark)").matches)},[E]),I.useEffect(()=>{var w;y||M(!1),o.current&&((w=o.current.contentWindow)==null||w.postMessage({html:y,js:i?[]:n,darkMode:c,action:"hydrate"},"*"))},[y,c,n,i,o]),I.useEffect(()=>{var w,A;if(o.current){let v=e.split(`
`);const B=80,C=3,j=-1;if((w=v.at(j))!=null&&w.startsWith("<!--")){const _=v.pop();v=[...v,...Rr(_??"",B)]}else(A=v.at(j))!=null&&A.endsWith(">")||v.pop();(v.length>C||!i)&&D(v.join(`
`))}},[e,i]),I.useEffect(()=>{const w=A=>{var v,B;A.origin===s&&(A.data.action==="ready"?y&&((B=(v=o.current)==null?void 0:v.contentWindow)==null||B.postMessage({html:y,js:n,darkMode:c,action:"hydrate"},"*")):A.data.screenshot?console.log("Got screenshot event, ignoring for now",A):A.data.comment?(g([...u,A.data.comment]),l(Or(A.data.html.trim())),P(!1)):A.data.action==="loaded"&&M(A.data.preview))};return window.addEventListener("message",w),()=>window.removeEventListener("message",w)},[y,u,n,c,l,g,s]),p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"w-full rounded-t-xl border bg-background p-4",children:p.jsxs("div",{className:"grid grid-cols-3",children:[p.jsx("div",{className:"col-span-2 items-center justify-center space-x-2 sm:col-span-1",children:p.jsxs(Ae,{children:[p.jsx(Te,{asChild:!0,children:p.jsx(je,{onClick:()=>{var w,A;P(!k),(A=(w=o.current)==null?void 0:w.contentWindow)==null||A.postMessage({html:y,action:"toggle-inspector"},"*")},size:"icon",variant:"outline",className:`${k&&"bg-secondary"}`,children:p.jsx("svg",{className:"inline-block h-4 w-4",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:p.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.5 2V0H7V2H5.5ZM0.96967 2.03033L2.46967 3.53033L3.53033 2.46967L2.03033 0.96967L0.96967 2.03033ZM4.24592 4.24592L4.79515 5.75631L7.79516 14.0063L8.46663 15.8529L9.19636 14.0285L10.2739 11.3346L13.4697 14.5303L14.5303 13.4697L11.3346 10.2739L14.0285 9.19636L15.8529 8.46663L14.0063 7.79516L5.75631 4.79516L4.24592 4.24592ZM11.6471 8.53337L10.1194 9.14447C9.6747 9.32235 9.32235 9.6747 9.14447 10.1194L8.53337 11.6471L6.75408 6.75408L11.6471 8.53337ZM0 7H2V5.5H0V7Z",fill:"currentColor"})})})}),p.jsx(Le,{children:"Comment on elements in the HTML"})]})}),p.jsxs("div",{className:"col-span-1 hidden items-center justify-center space-x-2 sm:flex",children:[p.jsxs(Ae,{children:[p.jsx(Te,{asChild:!0,children:p.jsxs(je,{onClick:()=>b("desktop"),size:"icon",variant:"outline",children:[p.jsx("span",{className:"sr-only",children:"Toggle desktop view"}),p.jsx("svg",{className:"inline-block h-3.5 w-3.5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20",children:p.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 14v4m-4 1h8M1 10h18M2 1h16a1 1 0 0 1 1 1v11a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1Z"})})]})}),p.jsx(Le,{children:"Toggle desktop view"})]}),p.jsxs(Ae,{children:[p.jsx(Te,{asChild:!0,children:p.jsxs(je,{onClick:()=>b("tablet"),variant:"outline",size:"icon",children:[p.jsx("span",{className:"sr-only",children:"Toggle tablet view"}),p.jsx("svg",{className:"inline-block h-3.5 w-3.5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 18 20",children:p.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7.5 16.5h3M2 1h14a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1Z"})})]})}),p.jsx(Le,{children:"Toggle tablet view"})]}),p.jsxs(Ae,{children:[p.jsx(Te,{asChild:!0,children:p.jsxs(je,{onClick:()=>b("mobile"),variant:"outline",size:"icon",children:[p.jsx("span",{className:"sr-only",children:"Toggle mobile view"}),p.jsx("svg",{className:"inline-block h-3.5 w-3.5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 20",children:p.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M1 14h12M1 4h12M6.5 16.5h1M2 1h10a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1Z"})})]})}),p.jsx(Le,{children:"Toggle mobile view"})]})]}),p.jsxs("div",{className:"col-span-1 flex justify-end",children:[p.jsxs(Ae,{children:[p.jsx(Te,{asChild:!0,children:p.jsxs(je,{onClick:()=>{var w;o.current&&(E(!c),(w=o.current.contentWindow)==null||w.postMessage({action:"toggle-dark-mode"},"*"))},variant:"outline",size:"icon",children:[p.jsx("svg",{"data-toggle-icon":"moon",className:`${!c&&"hidden"} inline-block h-3.5 w-3.5`,"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 18 20",children:p.jsx("path",{d:"M17.8 13.75a1 1 0 0 0-.859-.5A7.488 7.488 0 0 1 10.52 2a1 1 0 0 0 0-.969A1.035 1.035 0 0 0 9.687.5h-.113a9.5 9.5 0 1 0 8.222 14.247 1 1 0 0 0 .004-.997Z"})}),p.jsx("svg",{"data-toggle-icon":"sun",className:`${c&&"hidden"} inline-block h-3.5 w-3.5`,"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20",children:p.jsx("path",{d:"M10 15a5 5 0 1 0 0-10 5 5 0 0 0 0 10Zm0-11a1 1 0 0 0 1-1V1a1 1 0 0 0-2 0v2a1 1 0 0 0 1 1Zm0 12a1 1 0 0 0-1 1v2a1 1 0 1 0 2 0v-2a1 1 0 0 0-1-1ZM4.343 5.757a1 1 0 0 0 1.414-1.414L4.343 2.929a1 1 0 0 0-1.414 1.414l1.414 1.414Zm11.314 8.486a1 1 0 0 0-1.414 1.414l1.414 1.414a1 1 0 0 0 1.414-1.414l-1.414-1.414ZM4 10a1 1 0 0 0-1-1H1a1 1 0 0 0 0 2h2a1 1 0 0 0 1-1Zm15-1h-2a1 1 0 1 0 0 2h2a1 1 0 0 0 0-2ZM4.343 14.243l-1.414 1.414a1 1 0 1 0 1.414 1.414l1.414-1.414a1 1 0 0 0-1.414-1.414ZM14.95 6.05a1 1 0 0 0 .707-.293l1.414-1.414a1 1 0 1 0-1.414-1.414l-1.414 1.414a1 1 0 0 0 .707 1.707Z"})}),p.jsx("span",{className:"sr-only",children:"Toggle dark/light mode"})]})}),p.jsx(Le,{children:"Toggle dark/light mode"})]}),p.jsxs(Lr,{children:[p.jsxs(Ae,{children:[p.jsx(Te,{asChild:!0,children:p.jsx(Mr,{asChild:!0,children:p.jsx(je,{className:"ml-2",variant:"outline",size:"icon",children:p.jsx(Er,{strokeWidth:1})})})}),p.jsx(Le,{children:"View chat history"})]}),p.jsx(dt,{className:"w-[100%] overflow-scroll sm:max-lg:max-w-[75%] md:max-w-[50%]",children:p.jsxs(ft,{children:[p.jsx(mt,{children:"Chat history"}),p.jsx(pt,{asChild:!0,children:p.jsx(I.Suspense,{fallback:p.jsx(Ke,{loading:!0}),children:p.jsx(Br,{className:"prose prose-sm prose-zinc max-w-full dark:prose-invert",components:{code(w){const{children:A,className:v,node:B,ref:C,...j}=w,_=/language-(\w+)/.exec(v??"");return _?p.jsx(Dr,{className:"max-h-[300px] overflow-scroll text-xs",language:_[1],...j,children:String(A).replace(/\n$/,"")}):p.jsx("code",{children:A})}},children:Hr(h)})})})]})})]})]})]})}),p.jsx("div",{className:"code-preview-wrapper",children:p.jsx("div",{className:"code-preview flex border-x bg-background bg-gradient-to-r p-0",children:p.jsxs("div",{className:"code-responsive-wrapper h-[60vh] w-full overflow-auto",children:[p.jsx("iframe",{title:"HTML preview",sandbox:"allow-same-origin allow-scripts allow-forms allow-popups allow-modals",ref:o,className:`iframe-code mx-auto max-h-[60vh] w-full bg-background ${H==="tablet"&&"max-w-lg"} ${H==="mobile"&&"max-w-sm"}`,style:{height:T&&!t?"100%":0},src:`${s}/openui/index.html?buster=113`}),!T&&(i||t?p.jsx(Ke,{loading:!0,error:t}):p.jsx(_r,{callback:(w,A)=>{var v;if(w)(v=a==null?void 0:a.current)==null||v.click();else if(A){const B=new FileReader;B.addEventListener("load",C=>{var j;f((j=C.target)==null?void 0:j.result)}),B.readAsDataURL(A)}else console.error("Unable to process file")}}))]})})})]})}gt.defaultProps={error:void 0,imageUploadRef:void 0,js:[],rendering:!1};const me=Ce(/[A-Za-z]/),ce=Ce(/[\dA-Za-z]/),$r=Ce(/[#-'*+\--9=?A-Z^-~]/);function un(e){return e!==null&&(e<32||e===127)}const cn=Ce(/\d/),Vr=Ce(/[\dA-Fa-f]/),qr=Ce(/[!-/:-@[-`{-~]/);function N(e){return e!==null&&e<-2}function ne(e){return e!==null&&(e<0||e===32)}function R(e){return e===-2||e===-1||e===32}const Wr=Ce(new RegExp("\\p{P}|\\p{S}","u")),Ur=Ce(/\s/);function Ce(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}var xt={exports:{}};(function(e){(function(){var t;t=e.exports=i,t.format=i,t.vsprintf=r,typeof console<"u"&&typeof console.log=="function"&&(t.printf=n);function n(){console.log(i.apply(null,arguments))}function r(a,s){return i.apply(null,[a].concat(s))}function i(a){for(var s=1,o=[].slice.call(arguments),h=0,l=a.length,f="",u,g=!1,c,E,T=!1,M,k=function(){return o[s++]},P=function(){for(var y="";/\d/.test(a[h]);)y+=a[h++],u=a[h];return y.length>0?parseInt(y):null};h<l;++h)if(u=a[h],g)switch(g=!1,u=="."?(T=!1,u=a[++h]):u=="0"&&a[h+1]=="."?(T=!0,h+=2,u=a[h]):T=!0,M=P(),u){case"b":f+=parseInt(k(),10).toString(2);break;case"c":c=k(),typeof c=="string"||c instanceof String?f+=c:f+=String.fromCharCode(parseInt(c,10));break;case"d":f+=parseInt(k(),10);break;case"f":E=String(parseFloat(k()).toFixed(M||6)),f+=T?E:E.replace(/^0/,"");break;case"j":f+=JSON.stringify(k());break;case"o":f+="0"+parseInt(k(),10).toString(8);break;case"s":f+=k();break;case"x":f+="0x"+parseInt(k(),10).toString(16);break;case"X":f+="0x"+parseInt(k(),10).toString(16).toUpperCase();break;default:f+=u;break}else u==="%"?g=!0:f+=u;return f}})()})(xt);var Qr=xt.exports;const Zr=et(Qr),Ue=Object.assign(Ne(Error),{eval:Ne(EvalError),range:Ne(RangeError),reference:Ne(ReferenceError),syntax:Ne(SyntaxError),type:Ne(TypeError),uri:Ne(URIError)});function Ne(e){return t.displayName=e.displayName||e.name,t;function t(n,...r){const i=n&&Zr(n,...r);return new e(i)}}const Qe={}.hasOwnProperty,zn={yaml:"-",toml:"+"};function bn(e){const t=[];let n=-1;const r=Array.isArray(e)?e:e?[e]:["yaml"];for(;++n<r.length;)t[n]=Gr(r[n]);return t}function Gr(e){let t=e;if(typeof t=="string"){if(!Qe.call(zn,t))throw Ue("Missing matter definition for `%s`",t);t={type:t,marker:zn[t]}}else if(typeof t!="object")throw Ue("Expected matter to be an object, not `%j`",t);if(!Qe.call(t,"type"))throw Ue("Missing `type` in matter `%j`",t);if(!Qe.call(t,"fence")&&!Qe.call(t,"marker"))throw Ue("Missing `marker` or `fence` in matter `%j`",t);return t}function Jr(e){const t=bn(e),n={};let r=-1;for(;++r<t.length;){const i=t[r],a=hn(i,"open").charCodeAt(0),s=Kr(i),o=n[a];Array.isArray(o)?o.push(s):n[a]=[s]}return{flow:n}}function Kr(e){const t=e.anywhere,n=e.type,r=n+"Fence",i=r+"Sequence",a=n+"Value",s={tokenize:f,partial:!0};let o,h=0;return{tokenize:l,concrete:!0};function l(u,g,c){const E=this;return T;function T(w){const A=E.now();return A.column===1&&(A.line===1||t)&&(o=hn(e,"open"),h=0,w===o.charCodeAt(h))?(u.enter(n),u.enter(r),u.enter(i),M(w)):c(w)}function M(w){return h===o.length?(u.exit(i),R(w)?(u.enter("whitespace"),k(w)):P(w)):w===o.charCodeAt(h++)?(u.consume(w),M):c(w)}function k(w){return R(w)?(u.consume(w),k):(u.exit("whitespace"),P(w))}function P(w){return N(w)?(u.exit(r),u.enter("lineEnding"),u.consume(w),u.exit("lineEnding"),o=hn(e,"close"),h=0,u.attempt(s,b,y)):c(w)}function y(w){return w===null||N(w)?H(w):(u.enter(a),D(w))}function D(w){return w===null||N(w)?(u.exit(a),H(w)):(u.consume(w),D)}function H(w){return w===null?c(w):(u.enter("lineEnding"),u.consume(w),u.exit("lineEnding"),u.attempt(s,b,y))}function b(w){return u.exit(n),g(w)}}function f(u,g,c){let E=0;return T;function T(y){return y===o.charCodeAt(E)?(u.enter(r),u.enter(i),M(y)):c(y)}function M(y){return E===o.length?(u.exit(i),R(y)?(u.enter("whitespace"),k(y)):P(y)):y===o.charCodeAt(E++)?(u.consume(y),M):c(y)}function k(y){return R(y)?(u.consume(y),k):(u.exit("whitespace"),P(y))}function P(y){return y===null||N(y)?(u.exit(r),g(y)):c(y)}}}function hn(e,t){return e.marker?En(e.marker,t).repeat(3):En(e.fence,t)}function En(e,t){return typeof e=="string"?e:e[t]}function Yr(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function Xr(e){const t=bn(e),n={},r={};let i=-1;for(;++i<t.length;){const a=t[i];n[a.type]=ei(a),r[a.type]=ni,r[a.type+"Value"]=ti}return{enter:n,exit:r}}function ei(e){return t;function t(n){this.enter({type:e.type,value:""},n),this.buffer()}}function ni(e){const t=this.resume(),n=this.stack[this.stack.length-1];this.exit(e),n.value=t.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,"")}function ti(e){this.config.enter.data.call(this,e),this.config.exit.data.call(this,e)}function ri(e){const t=[],n={},r=bn(e);let i=-1;for(;++i<r.length;){const a=r[i];n[a.type]=ii(a);const s=dn(a,"open");t.push({atBreak:!0,character:s.charAt(0),after:Yr(s.charAt(1))})}return{unsafe:t,handlers:n}}function ii(e){const t=dn(e,"open"),n=dn(e,"close");return r;function r(i){return t+(i.value?`
`+i.value:"")+`
`+n}}function dn(e,t){return e.marker?In(e.marker,t).repeat(3):In(e.fence,t)}function In(e,t){return typeof e=="string"?e:e[t]}const ai="yaml";function si(e){const t=this,n=e||ai,r=t.data(),i=r.micromarkExtensions||(r.micromarkExtensions=[]),a=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),s=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);i.push(Jr(n)),a.push(Xr(n)),s.push(ri(n))}const oi={};function li(e,t){const n=t||oi,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return bt(e,r,i)}function bt(e,t,n){if(ui(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return vn(e.children,t,n)}return Array.isArray(e)?vn(e,t,n):""}function vn(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=bt(e[i],t,n);return r.join("")}function ui(e){return!!(e&&typeof e=="object")}const Nn=document.createElement("i");function kn(e){const t="&"+e+";";Nn.innerHTML=t;const n=Nn.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function pe(e,t,n,r){const i=e.length;let a=0,s;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)s=Array.from(r),s.unshift(t,n),e.splice(...s);else for(n&&e.splice(t,n);a<r.length;)s=r.slice(a,a+1e4),s.unshift(t,0),e.splice(...s),a+=1e4,t+=1e4}function oe(e,t){return e.length>0?(pe(e,e.length,0,t),e):t}const An={}.hasOwnProperty;function ci(e){const t={};let n=-1;for(;++n<e.length;)hi(t,e[n]);return t}function hi(e,t){let n;for(n in t){const i=(An.call(e,n)?e[n]:void 0)||(e[n]={}),a=t[n];let s;if(a)for(s in a){An.call(i,s)||(i[s]=[]);const o=a[s];di(i[s],Array.isArray(o)?o:o?[o]:[])}}}function di(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);pe(e,0,0,r)}function kt(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"ï¿½":String.fromCodePoint(n)}function Pe(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}function W(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let a=0;return s;function s(h){return R(h)?(e.enter(n),o(h)):t(h)}function o(h){return R(h)&&a++<i?(e.consume(h),o):(e.exit(n),t(h))}}const fi={tokenize:mi};function mi(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(o){if(o===null){e.consume(o);return}return e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),W(e,t,"linePrefix")}function i(o){return e.enter("paragraph"),a(o)}function a(o){const h=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=h),n=h,s(o)}function s(o){if(o===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(o);return}return N(o)?(e.consume(o),e.exit("chunkText"),a):(e.consume(o),s)}}const pi={tokenize:gi},Tn={tokenize:xi};function gi(e){const t=this,n=[];let r=0,i,a,s;return o;function o(y){if(r<n.length){const D=n[r];return t.containerState=D[1],e.attempt(D[0].continuation,h,l)(y)}return l(y)}function h(y){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&P();const D=t.events.length;let H=D,b;for(;H--;)if(t.events[H][0]==="exit"&&t.events[H][1].type==="chunkFlow"){b=t.events[H][1].end;break}k(r);let w=D;for(;w<t.events.length;)t.events[w][1].end=Object.assign({},b),w++;return pe(t.events,H+1,0,t.events.slice(D)),t.events.length=w,l(y)}return o(y)}function l(y){if(r===n.length){if(!i)return g(y);if(i.currentConstruct&&i.currentConstruct.concrete)return E(y);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(Tn,f,u)(y)}function f(y){return i&&P(),k(r),g(y)}function u(y){return t.parser.lazy[t.now().line]=r!==n.length,s=t.now().offset,E(y)}function g(y){return t.containerState={},e.attempt(Tn,c,E)(y)}function c(y){return r++,n.push([t.currentConstruct,t.containerState]),g(y)}function E(y){if(y===null){i&&P(),k(0),e.consume(y);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:a,_tokenizer:i}),T(y)}function T(y){if(y===null){M(e.exit("chunkFlow"),!0),k(0),e.consume(y);return}return N(y)?(e.consume(y),M(e.exit("chunkFlow")),r=0,t.interrupt=void 0,o):(e.consume(y),T)}function M(y,D){const H=t.sliceStream(y);if(D&&H.push(null),y.previous=a,a&&(a.next=y),a=y,i.defineSkip(y.start),i.write(H),t.parser.lazy[y.start.line]){let b=i.events.length;for(;b--;)if(i.events[b][1].start.offset<s&&(!i.events[b][1].end||i.events[b][1].end.offset>s))return;const w=t.events.length;let A=w,v,B;for(;A--;)if(t.events[A][0]==="exit"&&t.events[A][1].type==="chunkFlow"){if(v){B=t.events[A][1].end;break}v=!0}for(k(r),b=w;b<t.events.length;)t.events[b][1].end=Object.assign({},B),b++;pe(t.events,A+1,0,t.events.slice(w)),t.events.length=b}}function k(y){let D=n.length;for(;D-- >y;){const H=n[D];t.containerState=H[1],H[0].exit.call(t,e)}n.length=y}function P(){i.write([null]),a=void 0,i=void 0,t.containerState._closeFlow=void 0}}function xi(e,t,n){return W(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Ln(e){if(e===null||ne(e)||Ur(e))return 1;if(Wr(e))return 2}function yn(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const a=e[i].resolveAll;a&&!r.includes(a)&&(t=a(t,n),r.push(a))}return t}const fn={name:"attention",tokenize:ki,resolveAll:bi};function bi(e,t){let n=-1,r,i,a,s,o,h,l,f;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;h=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const u=Object.assign({},e[r][1].end),g=Object.assign({},e[n][1].start);Mn(u,-h),Mn(g,h),s={type:h>1?"strongSequence":"emphasisSequence",start:u,end:Object.assign({},e[r][1].end)},o={type:h>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[n][1].start),end:g},a={type:h>1?"strongText":"emphasisText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},i={type:h>1?"strong":"emphasis",start:Object.assign({},s.start),end:Object.assign({},o.end)},e[r][1].end=Object.assign({},s.start),e[n][1].start=Object.assign({},o.end),l=[],e[r][1].end.offset-e[r][1].start.offset&&(l=oe(l,[["enter",e[r][1],t],["exit",e[r][1],t]])),l=oe(l,[["enter",i,t],["enter",s,t],["exit",s,t],["enter",a,t]]),l=oe(l,yn(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),l=oe(l,[["exit",a,t],["enter",o,t],["exit",o,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(f=2,l=oe(l,[["enter",e[n][1],t],["exit",e[n][1],t]])):f=0,pe(e,r-1,n-r+3,l),n=r+l.length-f-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function ki(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=Ln(r);let a;return s;function s(h){return a=h,e.enter("attentionSequence"),o(h)}function o(h){if(h===a)return e.consume(h),o;const l=e.exit("attentionSequence"),f=Ln(h),u=!f||f===2&&i||n.includes(h),g=!i||i===2&&f||n.includes(r);return l._open=!!(a===42?u:u&&(i||!g)),l._close=!!(a===42?g:g&&(f||!u)),t(h)}}function Mn(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const yi={name:"autolink",tokenize:wi};function wi(e,t,n){let r=0;return i;function i(c){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(c),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),a}function a(c){return me(c)?(e.consume(c),s):l(c)}function s(c){return c===43||c===45||c===46||ce(c)?(r=1,o(c)):l(c)}function o(c){return c===58?(e.consume(c),r=0,h):(c===43||c===45||c===46||ce(c))&&r++<32?(e.consume(c),o):(r=0,l(c))}function h(c){return c===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(c),e.exit("autolinkMarker"),e.exit("autolink"),t):c===null||c===32||c===60||un(c)?n(c):(e.consume(c),h)}function l(c){return c===64?(e.consume(c),f):$r(c)?(e.consume(c),l):n(c)}function f(c){return ce(c)?u(c):n(c)}function u(c){return c===46?(e.consume(c),r=0,f):c===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(c),e.exit("autolinkMarker"),e.exit("autolink"),t):g(c)}function g(c){if((c===45||ce(c))&&r++<63){const E=c===45?g:u;return e.consume(c),E}return n(c)}}const Ye={tokenize:Si,partial:!0};function Si(e,t,n){return r;function r(a){return R(a)?W(e,i,"linePrefix")(a):i(a)}function i(a){return a===null||N(a)?t(a):n(a)}}const yt={name:"blockQuote",tokenize:ji,continuation:{tokenize:Ci},exit:zi};function ji(e,t,n){const r=this;return i;function i(s){if(s===62){const o=r.containerState;return o.open||(e.enter("blockQuote",{_container:!0}),o.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(s),e.exit("blockQuoteMarker"),a}return n(s)}function a(s){return R(s)?(e.enter("blockQuotePrefixWhitespace"),e.consume(s),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(s))}}function Ci(e,t,n){const r=this;return i;function i(s){return R(s)?W(e,a,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(s):a(s)}function a(s){return e.attempt(yt,t,n)(s)}}function zi(e){e.exit("blockQuote")}const wt={name:"characterEscape",tokenize:Ei};function Ei(e,t,n){return r;function r(a){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(a),e.exit("escapeMarker"),i}function i(a){return qr(a)?(e.enter("characterEscapeValue"),e.consume(a),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(a)}}const St={name:"characterReference",tokenize:Ii};function Ii(e,t,n){const r=this;let i=0,a,s;return o;function o(u){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(u),e.exit("characterReferenceMarker"),h}function h(u){return u===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(u),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),a=31,s=ce,f(u))}function l(u){return u===88||u===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(u),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),a=6,s=Vr,f):(e.enter("characterReferenceValue"),a=7,s=cn,f(u))}function f(u){if(u===59&&i){const g=e.exit("characterReferenceValue");return s===ce&&!kn(r.sliceSerialize(g))?n(u):(e.enter("characterReferenceMarker"),e.consume(u),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return s(u)&&i++<a?(e.consume(u),f):n(u)}}const Fn={tokenize:Ni,partial:!0},Pn={name:"codeFenced",tokenize:vi,concrete:!0};function vi(e,t,n){const r=this,i={tokenize:H,partial:!0};let a=0,s=0,o;return h;function h(b){return l(b)}function l(b){const w=r.events[r.events.length-1];return a=w&&w[1].type==="linePrefix"?w[2].sliceSerialize(w[1],!0).length:0,o=b,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),f(b)}function f(b){return b===o?(s++,e.consume(b),f):s<3?n(b):(e.exit("codeFencedFenceSequence"),R(b)?W(e,u,"whitespace")(b):u(b))}function u(b){return b===null||N(b)?(e.exit("codeFencedFence"),r.interrupt?t(b):e.check(Fn,T,D)(b)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),g(b))}function g(b){return b===null||N(b)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),u(b)):R(b)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),W(e,c,"whitespace")(b)):b===96&&b===o?n(b):(e.consume(b),g)}function c(b){return b===null||N(b)?u(b):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),E(b))}function E(b){return b===null||N(b)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),u(b)):b===96&&b===o?n(b):(e.consume(b),E)}function T(b){return e.attempt(i,D,M)(b)}function M(b){return e.enter("lineEnding"),e.consume(b),e.exit("lineEnding"),k}function k(b){return a>0&&R(b)?W(e,P,"linePrefix",a+1)(b):P(b)}function P(b){return b===null||N(b)?e.check(Fn,T,D)(b):(e.enter("codeFlowValue"),y(b))}function y(b){return b===null||N(b)?(e.exit("codeFlowValue"),P(b)):(e.consume(b),y)}function D(b){return e.exit("codeFenced"),t(b)}function H(b,w,A){let v=0;return B;function B(F){return b.enter("lineEnding"),b.consume(F),b.exit("lineEnding"),C}function C(F){return b.enter("codeFencedFence"),R(F)?W(b,j,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(F):j(F)}function j(F){return F===o?(b.enter("codeFencedFenceSequence"),_(F)):A(F)}function _(F){return F===o?(v++,b.consume(F),_):v>=s?(b.exit("codeFencedFenceSequence"),R(F)?W(b,Q,"whitespace")(F):Q(F)):A(F)}function Q(F){return F===null||N(F)?(b.exit("codeFencedFence"),w(F)):A(F)}}}function Ni(e,t,n){const r=this;return i;function i(s){return s===null?n(s):(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),a)}function a(s){return r.parser.lazy[r.now().line]?n(s):t(s)}}const Xe={name:"codeIndented",tokenize:Ti},Ai={tokenize:Li,partial:!0};function Ti(e,t,n){const r=this;return i;function i(l){return e.enter("codeIndented"),W(e,a,"linePrefix",5)(l)}function a(l){const f=r.events[r.events.length-1];return f&&f[1].type==="linePrefix"&&f[2].sliceSerialize(f[1],!0).length>=4?s(l):n(l)}function s(l){return l===null?h(l):N(l)?e.attempt(Ai,s,h)(l):(e.enter("codeFlowValue"),o(l))}function o(l){return l===null||N(l)?(e.exit("codeFlowValue"),s(l)):(e.consume(l),o)}function h(l){return e.exit("codeIndented"),t(l)}}function Li(e,t,n){const r=this;return i;function i(s){return r.parser.lazy[r.now().line]?n(s):N(s)?(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),i):W(e,a,"linePrefix",5)(s)}function a(s){const o=r.events[r.events.length-1];return o&&o[1].type==="linePrefix"&&o[2].sliceSerialize(o[1],!0).length>=4?t(s):N(s)?i(s):n(s)}}const Mi={name:"codeText",tokenize:_i,resolve:Fi,previous:Pi};function Fi(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function Pi(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function _i(e,t,n){let r=0,i,a;return s;function s(u){return e.enter("codeText"),e.enter("codeTextSequence"),o(u)}function o(u){return u===96?(e.consume(u),r++,o):(e.exit("codeTextSequence"),h(u))}function h(u){return u===null?n(u):u===32?(e.enter("space"),e.consume(u),e.exit("space"),h):u===96?(a=e.enter("codeTextSequence"),i=0,f(u)):N(u)?(e.enter("lineEnding"),e.consume(u),e.exit("lineEnding"),h):(e.enter("codeTextData"),l(u))}function l(u){return u===null||u===32||u===96||N(u)?(e.exit("codeTextData"),h(u)):(e.consume(u),l)}function f(u){return u===96?(e.consume(u),i++,f):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(u)):(a.type="codeTextData",l(u))}}function jt(e){const t={};let n=-1,r,i,a,s,o,h,l;for(;++n<e.length;){for(;n in t;)n=t[n];if(r=e[n],n&&r[1].type==="chunkFlow"&&e[n-1][1].type==="listItemPrefix"&&(h=r[1]._tokenizer.events,a=0,a<h.length&&h[a][1].type==="lineEndingBlank"&&(a+=2),a<h.length&&h[a][1].type==="content"))for(;++a<h.length&&h[a][1].type!=="content";)h[a][1].type==="chunkText"&&(h[a][1]._isInFirstContentOfListItem=!0,a++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,Di(e,n)),n=t[n],l=!0);else if(r[1]._container){for(a=n,i=void 0;a--&&(s=e[a],s[1].type==="lineEnding"||s[1].type==="lineEndingBlank");)s[0]==="enter"&&(i&&(e[i][1].type="lineEndingBlank"),s[1].type="lineEnding",i=a);i&&(r[1].end=Object.assign({},e[i][1].start),o=e.slice(i,n),o.unshift(r),pe(e,i,n-i+1,o))}}return!l}function Di(e,t){const n=e[t][1],r=e[t][2];let i=t-1;const a=[],s=n._tokenizer||r.parser[n.contentType](n.start),o=s.events,h=[],l={};let f,u,g=-1,c=n,E=0,T=0;const M=[T];for(;c;){for(;e[++i][1]!==c;);a.push(i),c._tokenizer||(f=r.sliceStream(c),c.next||f.push(null),u&&s.defineSkip(c.start),c._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=!0),s.write(f),c._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=void 0)),u=c,c=c.next}for(c=n;++g<o.length;)o[g][0]==="exit"&&o[g-1][0]==="enter"&&o[g][1].type===o[g-1][1].type&&o[g][1].start.line!==o[g][1].end.line&&(T=g+1,M.push(T),c._tokenizer=void 0,c.previous=void 0,c=c.next);for(s.events=[],c?(c._tokenizer=void 0,c.previous=void 0):M.pop(),g=M.length;g--;){const k=o.slice(M[g],M[g+1]),P=a.pop();h.unshift([P,P+k.length-1]),pe(e,P,2,k)}for(g=-1;++g<h.length;)l[E+h[g][0]]=E+h[g][1],E+=h[g][1]-h[g][0]-1;return l}const Bi={tokenize:Hi,resolve:Ri},Oi={tokenize:$i,partial:!0};function Ri(e){return jt(e),e}function Hi(e,t){let n;return r;function r(o){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(o)}function i(o){return o===null?a(o):N(o)?e.check(Oi,s,a)(o):(e.consume(o),i)}function a(o){return e.exit("chunkContent"),e.exit("content"),t(o)}function s(o){return e.consume(o),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function $i(e,t,n){const r=this;return i;function i(s){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),W(e,a,"linePrefix")}function a(s){if(s===null||N(s))return n(s);const o=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&o&&o[1].type==="linePrefix"&&o[2].sliceSerialize(o[1],!0).length>=4?t(s):e.interrupt(r.parser.constructs.flow,n,t)(s)}}function Ct(e,t,n,r,i,a,s,o,h){const l=h||Number.POSITIVE_INFINITY;let f=0;return u;function u(k){return k===60?(e.enter(r),e.enter(i),e.enter(a),e.consume(k),e.exit(a),g):k===null||k===32||k===41||un(k)?n(k):(e.enter(r),e.enter(s),e.enter(o),e.enter("chunkString",{contentType:"string"}),T(k))}function g(k){return k===62?(e.enter(a),e.consume(k),e.exit(a),e.exit(i),e.exit(r),t):(e.enter(o),e.enter("chunkString",{contentType:"string"}),c(k))}function c(k){return k===62?(e.exit("chunkString"),e.exit(o),g(k)):k===null||k===60||N(k)?n(k):(e.consume(k),k===92?E:c)}function E(k){return k===60||k===62||k===92?(e.consume(k),c):c(k)}function T(k){return!f&&(k===null||k===41||ne(k))?(e.exit("chunkString"),e.exit(o),e.exit(s),e.exit(r),t(k)):f<l&&k===40?(e.consume(k),f++,T):k===41?(e.consume(k),f--,T):k===null||k===32||k===40||un(k)?n(k):(e.consume(k),k===92?M:T)}function M(k){return k===40||k===41||k===92?(e.consume(k),T):T(k)}}function zt(e,t,n,r,i,a){const s=this;let o=0,h;return l;function l(c){return e.enter(r),e.enter(i),e.consume(c),e.exit(i),e.enter(a),f}function f(c){return o>999||c===null||c===91||c===93&&!h||c===94&&!o&&"_hiddenFootnoteSupport"in s.parser.constructs?n(c):c===93?(e.exit(a),e.enter(i),e.consume(c),e.exit(i),e.exit(r),t):N(c)?(e.enter("lineEnding"),e.consume(c),e.exit("lineEnding"),f):(e.enter("chunkString",{contentType:"string"}),u(c))}function u(c){return c===null||c===91||c===93||N(c)||o++>999?(e.exit("chunkString"),f(c)):(e.consume(c),h||(h=!R(c)),c===92?g:u)}function g(c){return c===91||c===92||c===93?(e.consume(c),o++,u):u(c)}}function Et(e,t,n,r,i,a){let s;return o;function o(g){return g===34||g===39||g===40?(e.enter(r),e.enter(i),e.consume(g),e.exit(i),s=g===40?41:g,h):n(g)}function h(g){return g===s?(e.enter(i),e.consume(g),e.exit(i),e.exit(r),t):(e.enter(a),l(g))}function l(g){return g===s?(e.exit(a),h(s)):g===null?n(g):N(g)?(e.enter("lineEnding"),e.consume(g),e.exit("lineEnding"),W(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),f(g))}function f(g){return g===s||g===null||N(g)?(e.exit("chunkString"),l(g)):(e.consume(g),g===92?u:f)}function u(g){return g===s||g===92?(e.consume(g),f):f(g)}}function He(e,t){let n;return r;function r(i){return N(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):R(i)?W(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}const Vi={name:"definition",tokenize:Wi},qi={tokenize:Ui,partial:!0};function Wi(e,t,n){const r=this;let i;return a;function a(c){return e.enter("definition"),s(c)}function s(c){return zt.call(r,e,o,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(c)}function o(c){return i=Pe(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),c===58?(e.enter("definitionMarker"),e.consume(c),e.exit("definitionMarker"),h):n(c)}function h(c){return ne(c)?He(e,l)(c):l(c)}function l(c){return Ct(e,f,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(c)}function f(c){return e.attempt(qi,u,u)(c)}function u(c){return R(c)?W(e,g,"whitespace")(c):g(c)}function g(c){return c===null||N(c)?(e.exit("definition"),r.parser.defined.push(i),t(c)):n(c)}}function Ui(e,t,n){return r;function r(o){return ne(o)?He(e,i)(o):n(o)}function i(o){return Et(e,a,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(o)}function a(o){return R(o)?W(e,s,"whitespace")(o):s(o)}function s(o){return o===null||N(o)?t(o):n(o)}}const Qi={name:"hardBreakEscape",tokenize:Zi};function Zi(e,t,n){return r;function r(a){return e.enter("hardBreakEscape"),e.consume(a),i}function i(a){return N(a)?(e.exit("hardBreakEscape"),t(a)):n(a)}}const Gi={name:"headingAtx",tokenize:Ki,resolve:Ji};function Ji(e,t){let n=e.length-2,r=3,i,a;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},a={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},pe(e,r,n-r+1,[["enter",i,t],["enter",a,t],["exit",a,t],["exit",i,t]])),e}function Ki(e,t,n){let r=0;return i;function i(f){return e.enter("atxHeading"),a(f)}function a(f){return e.enter("atxHeadingSequence"),s(f)}function s(f){return f===35&&r++<6?(e.consume(f),s):f===null||ne(f)?(e.exit("atxHeadingSequence"),o(f)):n(f)}function o(f){return f===35?(e.enter("atxHeadingSequence"),h(f)):f===null||N(f)?(e.exit("atxHeading"),t(f)):R(f)?W(e,o,"whitespace")(f):(e.enter("atxHeadingText"),l(f))}function h(f){return f===35?(e.consume(f),h):(e.exit("atxHeadingSequence"),o(f))}function l(f){return f===null||f===35||ne(f)?(e.exit("atxHeadingText"),o(f)):(e.consume(f),l)}}const Yi=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],_n=["pre","script","style","textarea"],Xi={name:"htmlFlow",tokenize:ra,resolveTo:ta,concrete:!0},ea={tokenize:aa,partial:!0},na={tokenize:ia,partial:!0};function ta(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function ra(e,t,n){const r=this;let i,a,s,o,h;return l;function l(m){return f(m)}function f(m){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(m),u}function u(m){return m===33?(e.consume(m),g):m===47?(e.consume(m),a=!0,T):m===63?(e.consume(m),i=3,r.interrupt?t:d):me(m)?(e.consume(m),s=String.fromCharCode(m),M):n(m)}function g(m){return m===45?(e.consume(m),i=2,c):m===91?(e.consume(m),i=5,o=0,E):me(m)?(e.consume(m),i=4,r.interrupt?t:d):n(m)}function c(m){return m===45?(e.consume(m),r.interrupt?t:d):n(m)}function E(m){const X="CDATA[";return m===X.charCodeAt(o++)?(e.consume(m),o===X.length?r.interrupt?t:j:E):n(m)}function T(m){return me(m)?(e.consume(m),s=String.fromCharCode(m),M):n(m)}function M(m){if(m===null||m===47||m===62||ne(m)){const X=m===47,le=s.toLowerCase();return!X&&!a&&_n.includes(le)?(i=1,r.interrupt?t(m):j(m)):Yi.includes(s.toLowerCase())?(i=6,X?(e.consume(m),k):r.interrupt?t(m):j(m)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(m):a?P(m):y(m))}return m===45||ce(m)?(e.consume(m),s+=String.fromCharCode(m),M):n(m)}function k(m){return m===62?(e.consume(m),r.interrupt?t:j):n(m)}function P(m){return R(m)?(e.consume(m),P):B(m)}function y(m){return m===47?(e.consume(m),B):m===58||m===95||me(m)?(e.consume(m),D):R(m)?(e.consume(m),y):B(m)}function D(m){return m===45||m===46||m===58||m===95||ce(m)?(e.consume(m),D):H(m)}function H(m){return m===61?(e.consume(m),b):R(m)?(e.consume(m),H):y(m)}function b(m){return m===null||m===60||m===61||m===62||m===96?n(m):m===34||m===39?(e.consume(m),h=m,w):R(m)?(e.consume(m),b):A(m)}function w(m){return m===h?(e.consume(m),h=null,v):m===null||N(m)?n(m):(e.consume(m),w)}function A(m){return m===null||m===34||m===39||m===47||m===60||m===61||m===62||m===96||ne(m)?H(m):(e.consume(m),A)}function v(m){return m===47||m===62||R(m)?y(m):n(m)}function B(m){return m===62?(e.consume(m),C):n(m)}function C(m){return m===null||N(m)?j(m):R(m)?(e.consume(m),C):n(m)}function j(m){return m===45&&i===2?(e.consume(m),U):m===60&&i===1?(e.consume(m),G):m===62&&i===4?(e.consume(m),Y):m===63&&i===3?(e.consume(m),d):m===93&&i===5?(e.consume(m),K):N(m)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(ea,he,_)(m)):m===null||N(m)?(e.exit("htmlFlowData"),_(m)):(e.consume(m),j)}function _(m){return e.check(na,Q,he)(m)}function Q(m){return e.enter("lineEnding"),e.consume(m),e.exit("lineEnding"),F}function F(m){return m===null||N(m)?_(m):(e.enter("htmlFlowData"),j(m))}function U(m){return m===45?(e.consume(m),d):j(m)}function G(m){return m===47?(e.consume(m),s="",re):j(m)}function re(m){if(m===62){const X=s.toLowerCase();return _n.includes(X)?(e.consume(m),Y):j(m)}return me(m)&&s.length<8?(e.consume(m),s+=String.fromCharCode(m),re):j(m)}function K(m){return m===93?(e.consume(m),d):j(m)}function d(m){return m===62?(e.consume(m),Y):m===45&&i===2?(e.consume(m),d):j(m)}function Y(m){return m===null||N(m)?(e.exit("htmlFlowData"),he(m)):(e.consume(m),Y)}function he(m){return e.exit("htmlFlow"),t(m)}}function ia(e,t,n){const r=this;return i;function i(s){return N(s)?(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),a):n(s)}function a(s){return r.parser.lazy[r.now().line]?n(s):t(s)}}function aa(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(Ye,t,n)}}const sa={name:"htmlText",tokenize:oa};function oa(e,t,n){const r=this;let i,a,s;return o;function o(d){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(d),h}function h(d){return d===33?(e.consume(d),l):d===47?(e.consume(d),H):d===63?(e.consume(d),y):me(d)?(e.consume(d),A):n(d)}function l(d){return d===45?(e.consume(d),f):d===91?(e.consume(d),a=0,E):me(d)?(e.consume(d),P):n(d)}function f(d){return d===45?(e.consume(d),c):n(d)}function u(d){return d===null?n(d):d===45?(e.consume(d),g):N(d)?(s=u,G(d)):(e.consume(d),u)}function g(d){return d===45?(e.consume(d),c):u(d)}function c(d){return d===62?U(d):d===45?g(d):u(d)}function E(d){const Y="CDATA[";return d===Y.charCodeAt(a++)?(e.consume(d),a===Y.length?T:E):n(d)}function T(d){return d===null?n(d):d===93?(e.consume(d),M):N(d)?(s=T,G(d)):(e.consume(d),T)}function M(d){return d===93?(e.consume(d),k):T(d)}function k(d){return d===62?U(d):d===93?(e.consume(d),k):T(d)}function P(d){return d===null||d===62?U(d):N(d)?(s=P,G(d)):(e.consume(d),P)}function y(d){return d===null?n(d):d===63?(e.consume(d),D):N(d)?(s=y,G(d)):(e.consume(d),y)}function D(d){return d===62?U(d):y(d)}function H(d){return me(d)?(e.consume(d),b):n(d)}function b(d){return d===45||ce(d)?(e.consume(d),b):w(d)}function w(d){return N(d)?(s=w,G(d)):R(d)?(e.consume(d),w):U(d)}function A(d){return d===45||ce(d)?(e.consume(d),A):d===47||d===62||ne(d)?v(d):n(d)}function v(d){return d===47?(e.consume(d),U):d===58||d===95||me(d)?(e.consume(d),B):N(d)?(s=v,G(d)):R(d)?(e.consume(d),v):U(d)}function B(d){return d===45||d===46||d===58||d===95||ce(d)?(e.consume(d),B):C(d)}function C(d){return d===61?(e.consume(d),j):N(d)?(s=C,G(d)):R(d)?(e.consume(d),C):v(d)}function j(d){return d===null||d===60||d===61||d===62||d===96?n(d):d===34||d===39?(e.consume(d),i=d,_):N(d)?(s=j,G(d)):R(d)?(e.consume(d),j):(e.consume(d),Q)}function _(d){return d===i?(e.consume(d),i=void 0,F):d===null?n(d):N(d)?(s=_,G(d)):(e.consume(d),_)}function Q(d){return d===null||d===34||d===39||d===60||d===61||d===96?n(d):d===47||d===62||ne(d)?v(d):(e.consume(d),Q)}function F(d){return d===47||d===62||ne(d)?v(d):n(d)}function U(d){return d===62?(e.consume(d),e.exit("htmlTextData"),e.exit("htmlText"),t):n(d)}function G(d){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),re}function re(d){return R(d)?W(e,K,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(d):K(d)}function K(d){return e.enter("htmlTextData"),s(d)}}const wn={name:"labelEnd",tokenize:fa,resolveTo:da,resolveAll:ha},la={tokenize:ma},ua={tokenize:pa},ca={tokenize:ga};function ha(e){let t=-1;for(;++t<e.length;){const n=e[t][1];(n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd")&&(e.splice(t+1,n.type==="labelImage"?4:2),n.type="data",t++)}return e}function da(e,t){let n=e.length,r=0,i,a,s,o;for(;n--;)if(i=e[n][1],a){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(s){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(a=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(s=n);const h={type:e[a][1].type==="labelLink"?"link":"image",start:Object.assign({},e[a][1].start),end:Object.assign({},e[e.length-1][1].end)},l={type:"label",start:Object.assign({},e[a][1].start),end:Object.assign({},e[s][1].end)},f={type:"labelText",start:Object.assign({},e[a+r+2][1].end),end:Object.assign({},e[s-2][1].start)};return o=[["enter",h,t],["enter",l,t]],o=oe(o,e.slice(a+1,a+r+3)),o=oe(o,[["enter",f,t]]),o=oe(o,yn(t.parser.constructs.insideSpan.null,e.slice(a+r+4,s-3),t)),o=oe(o,[["exit",f,t],e[s-2],e[s-1],["exit",l,t]]),o=oe(o,e.slice(s+1)),o=oe(o,[["exit",h,t]]),pe(e,a,e.length,o),e}function fa(e,t,n){const r=this;let i=r.events.length,a,s;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){a=r.events[i][1];break}return o;function o(g){return a?a._inactive?u(g):(s=r.parser.defined.includes(Pe(r.sliceSerialize({start:a.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(g),e.exit("labelMarker"),e.exit("labelEnd"),h):n(g)}function h(g){return g===40?e.attempt(la,f,s?f:u)(g):g===91?e.attempt(ua,f,s?l:u)(g):s?f(g):u(g)}function l(g){return e.attempt(ca,f,u)(g)}function f(g){return t(g)}function u(g){return a._balanced=!0,n(g)}}function ma(e,t,n){return r;function r(u){return e.enter("resource"),e.enter("resourceMarker"),e.consume(u),e.exit("resourceMarker"),i}function i(u){return ne(u)?He(e,a)(u):a(u)}function a(u){return u===41?f(u):Ct(e,s,o,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(u)}function s(u){return ne(u)?He(e,h)(u):f(u)}function o(u){return n(u)}function h(u){return u===34||u===39||u===40?Et(e,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(u):f(u)}function l(u){return ne(u)?He(e,f)(u):f(u)}function f(u){return u===41?(e.enter("resourceMarker"),e.consume(u),e.exit("resourceMarker"),e.exit("resource"),t):n(u)}}function pa(e,t,n){const r=this;return i;function i(o){return zt.call(r,e,a,s,"reference","referenceMarker","referenceString")(o)}function a(o){return r.parser.defined.includes(Pe(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(o):n(o)}function s(o){return n(o)}}function ga(e,t,n){return r;function r(a){return e.enter("reference"),e.enter("referenceMarker"),e.consume(a),e.exit("referenceMarker"),i}function i(a){return a===93?(e.enter("referenceMarker"),e.consume(a),e.exit("referenceMarker"),e.exit("reference"),t):n(a)}}const xa={name:"labelStartImage",tokenize:ba,resolveAll:wn.resolveAll};function ba(e,t,n){const r=this;return i;function i(o){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(o),e.exit("labelImageMarker"),a}function a(o){return o===91?(e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelImage"),s):n(o)}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const ka={name:"labelStartLink",tokenize:ya,resolveAll:wn.resolveAll};function ya(e,t,n){const r=this;return i;function i(s){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(s),e.exit("labelMarker"),e.exit("labelLink"),a}function a(s){return s===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(s):t(s)}}const en={name:"lineEnding",tokenize:wa};function wa(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),W(e,t,"linePrefix")}}const Ge={name:"thematicBreak",tokenize:Sa};function Sa(e,t,n){let r=0,i;return a;function a(l){return e.enter("thematicBreak"),s(l)}function s(l){return i=l,o(l)}function o(l){return l===i?(e.enter("thematicBreakSequence"),h(l)):r>=3&&(l===null||N(l))?(e.exit("thematicBreak"),t(l)):n(l)}function h(l){return l===i?(e.consume(l),r++,h):(e.exit("thematicBreakSequence"),R(l)?W(e,o,"whitespace")(l):o(l))}}const ee={name:"list",tokenize:za,continuation:{tokenize:Ea},exit:va},ja={tokenize:Na,partial:!0},Ca={tokenize:Ia,partial:!0};function za(e,t,n){const r=this,i=r.events[r.events.length-1];let a=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,s=0;return o;function o(c){const E=r.containerState.type||(c===42||c===43||c===45?"listUnordered":"listOrdered");if(E==="listUnordered"?!r.containerState.marker||c===r.containerState.marker:cn(c)){if(r.containerState.type||(r.containerState.type=E,e.enter(E,{_container:!0})),E==="listUnordered")return e.enter("listItemPrefix"),c===42||c===45?e.check(Ge,n,l)(c):l(c);if(!r.interrupt||c===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),h(c)}return n(c)}function h(c){return cn(c)&&++s<10?(e.consume(c),h):(!r.interrupt||s<2)&&(r.containerState.marker?c===r.containerState.marker:c===41||c===46)?(e.exit("listItemValue"),l(c)):n(c)}function l(c){return e.enter("listItemMarker"),e.consume(c),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||c,e.check(Ye,r.interrupt?n:f,e.attempt(ja,g,u))}function f(c){return r.containerState.initialBlankLine=!0,a++,g(c)}function u(c){return R(c)?(e.enter("listItemPrefixWhitespace"),e.consume(c),e.exit("listItemPrefixWhitespace"),g):n(c)}function g(c){return r.containerState.size=a+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(c)}}function Ea(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(Ye,i,a);function i(o){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,W(e,t,"listItemIndent",r.containerState.size+1)(o)}function a(o){return r.containerState.furtherBlankLines||!R(o)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,s(o)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(Ca,t,s)(o))}function s(o){return r.containerState._closeFlow=!0,r.interrupt=void 0,W(e,e.attempt(ee,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o)}}function Ia(e,t,n){const r=this;return W(e,i,"listItemIndent",r.containerState.size+1);function i(a){const s=r.events[r.events.length-1];return s&&s[1].type==="listItemIndent"&&s[2].sliceSerialize(s[1],!0).length===r.containerState.size?t(a):n(a)}}function va(e){e.exit(this.containerState.type)}function Na(e,t,n){const r=this;return W(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(a){const s=r.events[r.events.length-1];return!R(a)&&s&&s[1].type==="listItemPrefixWhitespace"?t(a):n(a)}}const Dn={name:"setextUnderline",tokenize:Ta,resolveTo:Aa};function Aa(e,t){let n=e.length,r,i,a;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!a&&e[n][1].type==="definition"&&(a=n);const s={type:"setextHeading",start:Object.assign({},e[i][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[i][1].type="setextHeadingText",a?(e.splice(i,0,["enter",s,t]),e.splice(a+1,0,["exit",e[r][1],t]),e[r][1].end=Object.assign({},e[a][1].end)):e[r][1]=s,e.push(["exit",s,t]),e}function Ta(e,t,n){const r=this;let i;return a;function a(l){let f=r.events.length,u;for(;f--;)if(r.events[f][1].type!=="lineEnding"&&r.events[f][1].type!=="linePrefix"&&r.events[f][1].type!=="content"){u=r.events[f][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||u)?(e.enter("setextHeadingLine"),i=l,s(l)):n(l)}function s(l){return e.enter("setextHeadingLineSequence"),o(l)}function o(l){return l===i?(e.consume(l),o):(e.exit("setextHeadingLineSequence"),R(l)?W(e,h,"lineSuffix")(l):h(l))}function h(l){return l===null||N(l)?(e.exit("setextHeadingLine"),t(l)):n(l)}}const La={tokenize:Ma};function Ma(e){const t=this,n=e.attempt(Ye,r,e.attempt(this.parser.constructs.flowInitial,i,W(e,e.attempt(this.parser.constructs.flow,i,e.attempt(Bi,i)),"linePrefix")));return n;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEndingBlank"),e.consume(a),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const Fa={resolveAll:vt()},Pa=It("string"),_a=It("text");function It(e){return{tokenize:t,resolveAll:vt(e==="text"?Da:void 0)};function t(n){const r=this,i=this.parser.constructs[e],a=n.attempt(i,s,o);return s;function s(f){return l(f)?a(f):o(f)}function o(f){if(f===null){n.consume(f);return}return n.enter("data"),n.consume(f),h}function h(f){return l(f)?(n.exit("data"),a(f)):(n.consume(f),h)}function l(f){if(f===null)return!0;const u=i[f];let g=-1;if(u)for(;++g<u.length;){const c=u[g];if(!c.previous||c.previous.call(r,r.previous))return!0}return!1}}}function vt(e){return t;function t(n,r){let i=-1,a;for(;++i<=n.length;)a===void 0?n[i]&&n[i][1].type==="data"&&(a=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==a+2&&(n[a][1].end=n[i-1][1].end,n.splice(a+2,i-a-2),i=a+2),a=void 0);return e?e(n,r):n}}function Da(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let a=i.length,s=-1,o=0,h;for(;a--;){const l=i[a];if(typeof l=="string"){for(s=l.length;l.charCodeAt(s-1)===32;)o++,s--;if(s)break;s=-1}else if(l===-2)h=!0,o++;else if(l!==-1){a++;break}}if(o){const l={type:n===e.length||h||o<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-o,offset:r.end.offset-o,_index:r.start._index+a,_bufferIndex:a?s:r.start._bufferIndex+s},end:Object.assign({},r.end)};r.end=Object.assign({},l.start),r.start.offset===r.end.offset?Object.assign(r,l):(e.splice(n,0,["enter",l,t],["exit",l,t]),n+=2)}n++}return e}function Ba(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const i={},a=[];let s=[],o=[];const h={consume:P,enter:y,exit:D,attempt:w(H),check:w(b),interrupt:w(b,{interrupt:!0})},l={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:c,sliceSerialize:g,now:E,defineSkip:T,write:u};let f=t.tokenize.call(l,h);return t.resolveAll&&a.push(t),l;function u(C){return s=oe(s,C),M(),s[s.length-1]!==null?[]:(A(t,0),l.events=yn(a,l.events,l),l.events)}function g(C,j){return Ra(c(C),j)}function c(C){return Oa(s,C)}function E(){const{line:C,column:j,offset:_,_index:Q,_bufferIndex:F}=r;return{line:C,column:j,offset:_,_index:Q,_bufferIndex:F}}function T(C){i[C.line]=C.column,B()}function M(){let C;for(;r._index<s.length;){const j=s[r._index];if(typeof j=="string")for(C=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===C&&r._bufferIndex<j.length;)k(j.charCodeAt(r._bufferIndex));else k(j)}}function k(C){f=f(C)}function P(C){N(C)?(r.line++,r.column=1,r.offset+=C===-3?2:1,B()):C!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===s[r._index].length&&(r._bufferIndex=-1,r._index++)),l.previous=C}function y(C,j){const _=j||{};return _.type=C,_.start=E(),l.events.push(["enter",_,l]),o.push(_),_}function D(C){const j=o.pop();return j.end=E(),l.events.push(["exit",j,l]),j}function H(C,j){A(C,j.from)}function b(C,j){j.restore()}function w(C,j){return _;function _(Q,F,U){let G,re,K,d;return Array.isArray(Q)?he(Q):"tokenize"in Q?he([Q]):Y(Q);function Y(Z){return ie;function ie(ae){const ge=ae!==null&&Z[ae],xe=ae!==null&&Z.null,ze=[...Array.isArray(ge)?ge:ge?[ge]:[],...Array.isArray(xe)?xe:xe?[xe]:[]];return he(ze)(ae)}}function he(Z){return G=Z,re=0,Z.length===0?U:m(Z[re])}function m(Z){return ie;function ie(ae){return d=v(),K=Z,Z.partial||(l.currentConstruct=Z),Z.name&&l.parser.constructs.disable.null.includes(Z.name)?le():Z.tokenize.call(j?Object.assign(Object.create(l),j):l,h,X,le)(ae)}}function X(Z){return C(K,d),F}function le(Z){return d.restore(),++re<G.length?m(G[re]):U}}}function A(C,j){C.resolveAll&&!a.includes(C)&&a.push(C),C.resolve&&pe(l.events,j,l.events.length-j,C.resolve(l.events.slice(j),l)),C.resolveTo&&(l.events=C.resolveTo(l.events,l))}function v(){const C=E(),j=l.previous,_=l.currentConstruct,Q=l.events.length,F=Array.from(o);return{restore:U,from:Q};function U(){r=C,l.previous=j,l.currentConstruct=_,l.events.length=Q,o=F,B()}}function B(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function Oa(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,a=t.end._bufferIndex;let s;if(n===i)s=[e[n].slice(r,a)];else{if(s=e.slice(n,i),r>-1){const o=s[0];typeof o=="string"?s[0]=o.slice(r):s.shift()}a>0&&s.push(e[i].slice(0,a))}return s}function Ra(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const a=e[n];let s;if(typeof a=="string")s=a;else switch(a){case-5:{s="\r";break}case-4:{s=`
`;break}case-3:{s=`\r
`;break}case-2:{s=t?" ":"	";break}case-1:{if(!t&&i)continue;s=" ";break}default:s=String.fromCharCode(a)}i=a===-2,r.push(s)}return r.join("")}const Ha={42:ee,43:ee,45:ee,48:ee,49:ee,50:ee,51:ee,52:ee,53:ee,54:ee,55:ee,56:ee,57:ee,62:yt},$a={91:Vi},Va={[-2]:Xe,[-1]:Xe,32:Xe},qa={35:Gi,42:Ge,45:[Dn,Ge],60:Xi,61:Dn,95:Ge,96:Pn,126:Pn},Wa={38:St,92:wt},Ua={[-5]:en,[-4]:en,[-3]:en,33:xa,38:St,42:fn,60:[yi,sa],91:ka,92:[Qi,wt],93:wn,95:fn,96:Mi},Qa={null:[fn,Fa]},Za={null:[42,95]},Ga={null:[]},Ja=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:Za,contentInitial:$a,disable:Ga,document:Ha,flow:qa,flowInitial:Va,insideSpan:Qa,string:Wa,text:Ua},Symbol.toStringTag,{value:"Module"}));function Ka(e){const n=ci([Ja,...(e||{}).extensions||[]]),r={defined:[],lazy:{},constructs:n,content:i(fi),document:i(pi),flow:i(La),string:i(Pa),text:i(_a)};return r;function i(a){return s;function s(o){return Ba(r,a,o)}}}function Ya(e){for(;!jt(e););return e}const Bn=/[\0\t\n\r]/g;function Xa(){let e=1,t="",n=!0,r;return i;function i(a,s,o){const h=[];let l,f,u,g,c;for(a=t+(typeof a=="string"?a.toString():new TextDecoder(s||void 0).decode(a)),u=0,t="",n&&(a.charCodeAt(0)===65279&&u++,n=void 0);u<a.length;){if(Bn.lastIndex=u,l=Bn.exec(a),g=l&&l.index!==void 0?l.index:a.length,c=a.charCodeAt(g),!l){t=a.slice(u);break}if(c===10&&u===g&&r)h.push(-3),r=void 0;else switch(r&&(h.push(-5),r=void 0),u<g&&(h.push(a.slice(u,g)),e+=g-u),c){case 0:{h.push(65533),e++;break}case 9:{for(f=Math.ceil(e/4)*4,h.push(-2);e++<f;)h.push(-1);break}case 10:{h.push(-4),e=1;break}default:r=!0,e=1}u=g+1}return o&&(r&&h.push(-5),t&&h.push(t),h.push(null)),h}}const es=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function ns(e){return e.replace(es,ts)}function ts(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),a=i===120||i===88;return kt(n.slice(a?2:1),a?16:10)}return kn(n)||e}function $e(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?On(e.position):"start"in e||"end"in e?On(e):"line"in e||"column"in e?mn(e):""}function mn(e){return Rn(e&&e.line)+":"+Rn(e&&e.column)}function On(e){return mn(e&&e.start)+"-"+mn(e&&e.end)}function Rn(e){return e&&typeof e=="number"?e:1}const Nt={}.hasOwnProperty;function rs(e,t,n){return typeof t!="string"&&(n=t,t=void 0),is(n)(Ya(Ka(n).document().write(Xa()(e,t,!0))))}function is(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:a($),autolinkProtocol:v,autolinkEmail:v,atxHeading:a(Ie),blockQuote:a(ge),characterEscape:v,characterReference:v,codeFenced:a(xe),codeFencedFenceInfo:s,codeFencedFenceMeta:s,codeIndented:a(xe,s),codeText:a(ze,s),codeTextData:v,data:v,codeFlowValue:v,definition:a(_e),definitionDestinationString:s,definitionLabelString:s,definitionTitleString:s,emphasis:a(Ee),hardBreakEscape:a(De),hardBreakTrailing:a(De),htmlFlow:a(We,s),htmlFlowData:v,htmlText:a(We,s),htmlTextData:v,image:a(z),label:s,link:a($),listItem:a(J),listItemValue:g,listOrdered:a(V,u),listUnordered:a(V),paragraph:a(be),reference:m,referenceString:s,resourceDestinationString:s,resourceTitleString:s,setextHeading:a(Ie),strong:a(Ft),thematicBreak:a(_t)},exit:{atxHeading:h(),atxHeadingSequence:H,autolink:h(),autolinkEmail:ae,autolinkProtocol:ie,blockQuote:h(),characterEscapeValue:B,characterReferenceMarkerHexadecimal:le,characterReferenceMarkerNumeric:le,characterReferenceValue:Z,codeFenced:h(M),codeFencedFence:T,codeFencedFenceInfo:c,codeFencedFenceMeta:E,codeFlowValue:B,codeIndented:h(k),codeText:h(F),codeTextData:B,data:B,definition:h(),definitionDestinationString:D,definitionLabelString:P,definitionTitleString:y,emphasis:h(),hardBreakEscape:h(j),hardBreakTrailing:h(j),htmlFlow:h(_),htmlFlowData:B,htmlText:h(Q),htmlTextData:B,image:h(G),label:K,labelText:re,lineEnding:C,link:h(U),listItem:h(),listOrdered:h(),listUnordered:h(),paragraph:h(),referenceString:X,resourceDestinationString:d,resourceTitleString:Y,resource:he,setextHeading:h(A),setextHeadingLineSequence:w,setextHeadingText:b,strong:h(),thematicBreak:h()}};At(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(x){let S={type:"root",children:[]};const L={stack:[S],tokenStack:[],config:t,enter:o,exit:l,buffer:s,resume:f,data:n},O=[];let q=-1;for(;++q<x.length;)if(x[q][1].type==="listOrdered"||x[q][1].type==="listUnordered")if(x[q][0]==="enter")O.push(q);else{const ue=O.pop();q=i(x,ue,q)}for(q=-1;++q<x.length;){const ue=t[x[q][0]];Nt.call(ue,x[q][1].type)&&ue[x[q][1].type].call(Object.assign({sliceSerialize:x[q][2].sliceSerialize},L),x[q][1])}if(L.tokenStack.length>0){const ue=L.tokenStack[L.tokenStack.length-1];(ue[1]||Hn).call(L,void 0,ue[0])}for(S.position={start:Se(x.length>0?x[0][1].start:{line:1,column:1,offset:0}),end:Se(x.length>0?x[x.length-2][1].end:{line:1,column:1,offset:0})},q=-1;++q<t.transforms.length;)S=t.transforms[q](S)||S;return S}function i(x,S,L){let O=S-1,q=-1,ue=!1,ve,ke,Be,Oe;for(;++O<=L;){const se=x[O];switch(se[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{se[0]==="enter"?q++:q--,Oe=void 0;break}case"lineEndingBlank":{se[0]==="enter"&&(ve&&!Oe&&!q&&!Be&&(Be=O),Oe=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Oe=void 0}if(!q&&se[0]==="enter"&&se[1].type==="listItemPrefix"||q===-1&&se[0]==="exit"&&(se[1].type==="listUnordered"||se[1].type==="listOrdered")){if(ve){let Me=O;for(ke=void 0;Me--;){const ye=x[Me];if(ye[1].type==="lineEnding"||ye[1].type==="lineEndingBlank"){if(ye[0]==="exit")continue;ke&&(x[ke][1].type="lineEndingBlank",ue=!0),ye[1].type="lineEnding",ke=Me}else if(!(ye[1].type==="linePrefix"||ye[1].type==="blockQuotePrefix"||ye[1].type==="blockQuotePrefixWhitespace"||ye[1].type==="blockQuoteMarker"||ye[1].type==="listItemIndent"))break}Be&&(!ke||Be<ke)&&(ve._spread=!0),ve.end=Object.assign({},ke?x[ke][1].start:se[1].end),x.splice(ke||O,0,["exit",ve,se[2]]),O++,L++}if(se[1].type==="listItemPrefix"){const Me={type:"listItem",_spread:!1,start:Object.assign({},se[1].start),end:void 0};ve=Me,x.splice(O,0,["enter",Me,se[2]]),O++,L++,Be=void 0,Oe=!0}}}return x[S][1]._spread=ue,L}function a(x,S){return L;function L(O){o.call(this,x(O),O),S&&S.call(this,O)}}function s(){this.stack.push({type:"fragment",children:[]})}function o(x,S,L){this.stack[this.stack.length-1].children.push(x),this.stack.push(x),this.tokenStack.push([S,L]),x.position={start:Se(S.start),end:void 0}}function h(x){return S;function S(L){x&&x.call(this,L),l.call(this,L)}}function l(x,S){const L=this.stack.pop(),O=this.tokenStack.pop();if(O)O[0].type!==x.type&&(S?S.call(this,x,O[0]):(O[1]||Hn).call(this,x,O[0]));else throw new Error("Cannot close `"+x.type+"` ("+$e({start:x.start,end:x.end})+"): itâ€™s not open");L.position.end=Se(x.end)}function f(){return li(this.stack.pop())}function u(){this.data.expectingFirstListItemValue=!0}function g(x){if(this.data.expectingFirstListItemValue){const S=this.stack[this.stack.length-2];S.start=Number.parseInt(this.sliceSerialize(x),10),this.data.expectingFirstListItemValue=void 0}}function c(){const x=this.resume(),S=this.stack[this.stack.length-1];S.lang=x}function E(){const x=this.resume(),S=this.stack[this.stack.length-1];S.meta=x}function T(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function M(){const x=this.resume(),S=this.stack[this.stack.length-1];S.value=x.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function k(){const x=this.resume(),S=this.stack[this.stack.length-1];S.value=x.replace(/(\r?\n|\r)$/g,"")}function P(x){const S=this.resume(),L=this.stack[this.stack.length-1];L.label=S,L.identifier=Pe(this.sliceSerialize(x)).toLowerCase()}function y(){const x=this.resume(),S=this.stack[this.stack.length-1];S.title=x}function D(){const x=this.resume(),S=this.stack[this.stack.length-1];S.url=x}function H(x){const S=this.stack[this.stack.length-1];if(!S.depth){const L=this.sliceSerialize(x).length;S.depth=L}}function b(){this.data.setextHeadingSlurpLineEnding=!0}function w(x){const S=this.stack[this.stack.length-1];S.depth=this.sliceSerialize(x).codePointAt(0)===61?1:2}function A(){this.data.setextHeadingSlurpLineEnding=void 0}function v(x){const L=this.stack[this.stack.length-1].children;let O=L[L.length-1];(!O||O.type!=="text")&&(O=Pt(),O.position={start:Se(x.start),end:void 0},L.push(O)),this.stack.push(O)}function B(x){const S=this.stack.pop();S.value+=this.sliceSerialize(x),S.position.end=Se(x.end)}function C(x){const S=this.stack[this.stack.length-1];if(this.data.atHardBreak){const L=S.children[S.children.length-1];L.position.end=Se(x.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(S.type)&&(v.call(this,x),B.call(this,x))}function j(){this.data.atHardBreak=!0}function _(){const x=this.resume(),S=this.stack[this.stack.length-1];S.value=x}function Q(){const x=this.resume(),S=this.stack[this.stack.length-1];S.value=x}function F(){const x=this.resume(),S=this.stack[this.stack.length-1];S.value=x}function U(){const x=this.stack[this.stack.length-1];if(this.data.inReference){const S=this.data.referenceType||"shortcut";x.type+="Reference",x.referenceType=S,delete x.url,delete x.title}else delete x.identifier,delete x.label;this.data.referenceType=void 0}function G(){const x=this.stack[this.stack.length-1];if(this.data.inReference){const S=this.data.referenceType||"shortcut";x.type+="Reference",x.referenceType=S,delete x.url,delete x.title}else delete x.identifier,delete x.label;this.data.referenceType=void 0}function re(x){const S=this.sliceSerialize(x),L=this.stack[this.stack.length-2];L.label=ns(S),L.identifier=Pe(S).toLowerCase()}function K(){const x=this.stack[this.stack.length-1],S=this.resume(),L=this.stack[this.stack.length-1];if(this.data.inReference=!0,L.type==="link"){const O=x.children;L.children=O}else L.alt=S}function d(){const x=this.resume(),S=this.stack[this.stack.length-1];S.url=x}function Y(){const x=this.resume(),S=this.stack[this.stack.length-1];S.title=x}function he(){this.data.inReference=void 0}function m(){this.data.referenceType="collapsed"}function X(x){const S=this.resume(),L=this.stack[this.stack.length-1];L.label=S,L.identifier=Pe(this.sliceSerialize(x)).toLowerCase(),this.data.referenceType="full"}function le(x){this.data.characterReferenceType=x.type}function Z(x){const S=this.sliceSerialize(x),L=this.data.characterReferenceType;let O;L?(O=kt(S,L==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):O=kn(S);const q=this.stack.pop();q.value+=O,q.position.end=Se(x.end)}function ie(x){B.call(this,x);const S=this.stack[this.stack.length-1];S.url=this.sliceSerialize(x)}function ae(x){B.call(this,x);const S=this.stack[this.stack.length-1];S.url="mailto:"+this.sliceSerialize(x)}function ge(){return{type:"blockquote",children:[]}}function xe(){return{type:"code",lang:null,meta:null,value:""}}function ze(){return{type:"inlineCode",value:""}}function _e(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Ee(){return{type:"emphasis",children:[]}}function Ie(){return{type:"heading",depth:0,children:[]}}function De(){return{type:"break"}}function We(){return{type:"html",value:""}}function z(){return{type:"image",title:null,url:"",alt:null}}function $(){return{type:"link",title:null,url:"",children:[]}}function V(x){return{type:"list",ordered:x.type==="listOrdered",start:null,spread:x._spread,children:[]}}function J(x){return{type:"listItem",spread:x._spread,checked:null,children:[]}}function be(){return{type:"paragraph",children:[]}}function Ft(){return{type:"strong",children:[]}}function Pt(){return{type:"text",value:""}}function _t(){return{type:"thematicBreak"}}}function Se(e){return{line:e.line,column:e.column,offset:e.offset}}function At(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?At(e,r):as(e,r)}}function as(e,t){let n;for(n in t)if(Nt.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function Hn(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+$e({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+$e({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+$e({start:t.start,end:t.end})+") is still open")}function ss(e){const t=this;t.parser=n;function n(r){return rs(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function $n(e){if(e)throw e}var Je=Object.prototype.hasOwnProperty,Tt=Object.prototype.toString,Vn=Object.defineProperty,qn=Object.getOwnPropertyDescriptor,Wn=function(t){return typeof Array.isArray=="function"?Array.isArray(t):Tt.call(t)==="[object Array]"},Un=function(t){if(!t||Tt.call(t)!=="[object Object]")return!1;var n=Je.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&Je.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var i;for(i in t);return typeof i>"u"||Je.call(t,i)},Qn=function(t,n){Vn&&n.name==="__proto__"?Vn(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},Zn=function(t,n){if(n==="__proto__")if(Je.call(t,n)){if(qn)return qn(t,n).value}else return;return t[n]},os=function e(){var t,n,r,i,a,s,o=arguments[0],h=1,l=arguments.length,f=!1;for(typeof o=="boolean"&&(f=o,o=arguments[1]||{},h=2),(o==null||typeof o!="object"&&typeof o!="function")&&(o={});h<l;++h)if(t=arguments[h],t!=null)for(n in t)r=Zn(o,n),i=Zn(t,n),o!==i&&(f&&i&&(Un(i)||(a=Wn(i)))?(a?(a=!1,s=r&&Wn(r)?r:[]):s=r&&Un(r)?r:{},Qn(o,{name:n,newValue:e(f,s,i)})):typeof i<"u"&&Qn(o,{name:n,newValue:i}));return o};const nn=et(os);function pn(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function ls(){const e=[],t={run:n,use:r};return t;function n(...i){let a=-1;const s=i.pop();if(typeof s!="function")throw new TypeError("Expected function as last argument, not "+s);o(null,...i);function o(h,...l){const f=e[++a];let u=-1;if(h){s(h);return}for(;++u<i.length;)(l[u]===null||l[u]===void 0)&&(l[u]=i[u]);i=l,f?us(f,o)(...l):s(null,...l)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function us(e,t){let n;return r;function r(...s){const o=e.length>s.length;let h;o&&s.push(i);try{h=e.apply(this,s)}catch(l){const f=l;if(o&&n)throw f;return i(f)}o||(h&&h.then&&typeof h.then=="function"?h.then(a,i):h instanceof Error?i(h):a(h))}function i(s,...o){n||(n=!0,t(s,...o))}function a(s){i(null,s)}}class te extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",a={},s=!1;if(n&&("line"in n&&"column"in n?a={place:n}:"start"in n&&"end"in n?a={place:n}:"type"in n?a={ancestors:[n],place:n.position}:a={...n}),typeof t=="string"?i=t:!a.cause&&t&&(s=!0,i=t.message,a.cause=t),!a.ruleId&&!a.source&&typeof r=="string"){const h=r.indexOf(":");h===-1?a.ruleId=r:(a.source=r.slice(0,h),a.ruleId=r.slice(h+1))}if(!a.place&&a.ancestors&&a.ancestors){const h=a.ancestors[a.ancestors.length-1];h&&(a.place=h.position)}const o=a.place&&"start"in a.place?a.place.start:a.place;this.ancestors=a.ancestors||void 0,this.cause=a.cause||void 0,this.column=o?o.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=o?o.line:void 0,this.name=$e(a.place)||"1:1",this.place=a.place||void 0,this.reason=this.message,this.ruleId=a.ruleId||void 0,this.source=a.source||void 0,this.stack=s&&a.cause&&typeof a.cause.stack=="string"?a.cause.stack:"",this.actual,this.expected,this.note,this.url}}te.prototype.file="";te.prototype.name="";te.prototype.reason="";te.prototype.message="";te.prototype.stack="";te.prototype.column=void 0;te.prototype.line=void 0;te.prototype.ancestors=void 0;te.prototype.cause=void 0;te.prototype.fatal=void 0;te.prototype.place=void 0;te.prototype.ruleId=void 0;te.prototype.source=void 0;const de={basename:cs,dirname:hs,extname:ds,join:fs,sep:"/"};function cs(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');qe(e);let n=0,r=-1,i=e.length,a;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(a){n=i+1;break}}else r<0&&(a=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let s=-1,o=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(a){n=i+1;break}}else s<0&&(a=!0,s=i+1),o>-1&&(e.codePointAt(i)===t.codePointAt(o--)?o<0&&(r=i):(o=-1,r=s));return n===r?r=s:r<0&&(r=e.length),e.slice(n,r)}function hs(e){if(qe(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function ds(e){qe(e);let t=e.length,n=-1,r=0,i=-1,a=0,s;for(;t--;){const o=e.codePointAt(t);if(o===47){if(s){r=t+1;break}continue}n<0&&(s=!0,n=t+1),o===46?i<0?i=t:a!==1&&(a=1):i>-1&&(a=-1)}return i<0||n<0||a===0||a===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function fs(...e){let t=-1,n;for(;++t<e.length;)qe(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":ms(n)}function ms(e){qe(e);const t=e.codePointAt(0)===47;let n=ps(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function ps(e,t){let n="",r=0,i=-1,a=0,s=-1,o,h;for(;++s<=e.length;){if(s<e.length)o=e.codePointAt(s);else{if(o===47)break;o=47}if(o===47){if(!(i===s-1||a===1))if(i!==s-1&&a===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(h=n.lastIndexOf("/"),h!==n.length-1){h<0?(n="",r=0):(n=n.slice(0,h),r=n.length-1-n.lastIndexOf("/")),i=s,a=0;continue}}else if(n.length>0){n="",r=0,i=s,a=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,s):n=e.slice(i+1,s),r=s-i-1;i=s,a=0}else o===46&&a>-1?a++:a=-1}return n}function qe(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const gs={cwd:xs};function xs(){return"/"}function gn(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function bs(e){if(typeof e=="string")e=new URL(e);else if(!gn(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return ks(e)}function ks(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const tn=["history","path","basename","stem","extname","dirname"];class ys{constructor(t){let n;t?gn(t)?n={path:t}:typeof t=="string"||ws(t)?n={value:t}:n=t:n={},this.cwd=gs.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<tn.length;){const a=tn[r];a in n&&n[a]!==void 0&&n[a]!==null&&(this[a]=a==="history"?[...n[a]]:n[a])}let i;for(i in n)tn.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?de.basename(this.path):void 0}set basename(t){an(t,"basename"),rn(t,"basename"),this.path=de.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?de.dirname(this.path):void 0}set dirname(t){Gn(this.basename,"dirname"),this.path=de.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?de.extname(this.path):void 0}set extname(t){if(rn(t,"extname"),Gn(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=de.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){gn(t)&&(t=bs(t)),an(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?de.basename(this.path,this.extname):void 0}set stem(t){an(t,"stem"),rn(t,"stem"),this.path=de.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=void 0,i}message(t,n,r){const i=new te(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function rn(e,t){if(e&&e.includes(de.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+de.sep+"`")}function an(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function Gn(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function ws(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const Ss=function(e){const r=this.constructor.prototype,i=r[e],a=function(){return i.apply(a,arguments)};Object.setPrototypeOf(a,r);const s=Object.getOwnPropertyNames(i);for(const o of s){const h=Object.getOwnPropertyDescriptor(i,o);h&&Object.defineProperty(a,o,h)}return a},js={}.hasOwnProperty;class Sn extends Ss{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=ls()}copy(){const t=new Sn;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(nn(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(ln("data",this.frozen),this.namespace[t]=n,this):js.call(this.namespace,t)&&this.namespace[t]||void 0:t?(ln("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(t,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=Ze(t),r=this.parser||this.Parser;return sn("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),sn("process",this.parser||this.Parser),on("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(a,s){const o=Ze(t),h=r.parse(o);r.run(h,o,function(f,u,g){if(f||!u||!g)return l(f);const c=u,E=r.stringify(c,g);Es(E)?g.value=E:g.result=E,l(f,g)});function l(f,u){f||!u?s(f):a?a(u):n(void 0,u)}}}processSync(t){let n=!1,r;return this.freeze(),sn("processSync",this.parser||this.Parser),on("processSync",this.compiler||this.Compiler),this.process(t,i),Kn("processSync","process",n),r;function i(a,s){n=!0,$n(a),r=s}}run(t,n,r){Jn(t),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?a(void 0,r):new Promise(a);function a(s,o){const h=Ze(n);i.run(t,h,l);function l(f,u,g){const c=u||t;f?o(f):s?s(c):r(void 0,c,g)}}}runSync(t,n){let r=!1,i;return this.run(t,n,a),Kn("runSync","run",r),i;function a(s,o){$n(s),i=o,r=!0}}stringify(t,n){this.freeze();const r=Ze(n),i=this.compiler||this.Compiler;return on("stringify",i),Jn(t),i(t,r)}use(t,...n){const r=this.attachers,i=this.namespace;if(ln("use",this.frozen),t!=null)if(typeof t=="function")h(t,n);else if(typeof t=="object")Array.isArray(t)?o(t):s(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function a(l){if(typeof l=="function")h(l,[]);else if(typeof l=="object")if(Array.isArray(l)){const[f,...u]=l;h(f,u)}else s(l);else throw new TypeError("Expected usable value, not `"+l+"`")}function s(l){if(!("plugins"in l)&&!("settings"in l))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");o(l.plugins),l.settings&&(i.settings=nn(!0,i.settings,l.settings))}function o(l){let f=-1;if(l!=null)if(Array.isArray(l))for(;++f<l.length;){const u=l[f];a(u)}else throw new TypeError("Expected a list of plugins, not `"+l+"`")}function h(l,f){let u=-1,g=-1;for(;++u<r.length;)if(r[u][0]===l){g=u;break}if(g===-1)r.push([l,...f]);else if(f.length>0){let[c,...E]=f;const T=r[g][1];pn(T)&&pn(c)&&(c=nn(!0,T,c)),r[g]=[l,c,...E]}}}}const Cs=new Sn().freeze();function sn(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function on(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function ln(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Jn(e){if(!pn(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function Kn(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function Ze(e){return zs(e)?e:new ys(e)}function zs(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function Es(e){return typeof e=="string"||Is(e)}function Is(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}function vs(e,t={}){var o,h;const n={},r=Cs().use(ss).use(si).parse(e.replace("```yaml\n",""));let i;for(const l of r.children){if(l.type==="yaml"){i=l;break}if(l.type==="heading"&&l.children[0].type==="text"&&l.children[0].value.includes("name: ")){[i]=l.children;break}}if(!i&&r.children[0]&&(r.children[0].type==="heading"||r.children[0].type==="paragraph")&&(i=r.children[0].children[0]),i){const l=(o=i.value.split(`
`).find(u=>u.startsWith("name: ")))==null?void 0:o.replace("name: ",""),f=(h=i.value.split(`
`).find(u=>u.startsWith("emoji: ")))==null?void 0:h.replace("emoji: ","");n.name=l,n.emoji=f}else e.length>50&&!t.emoji&&console.warn("No frontmatter",e.slice(0,100));const a=r.children.filter(l=>l.type==="code"||l.type==="html");for(const l of r.children)if(l.type==="paragraph"){let f="";if(l.children[0].type==="html")for(const u of l.children)f=f+u.value||"";a.push({type:"code",lang:"html",value:f})}const s=r.children.filter(l=>l.type==="code"&&l.lang==="javascript");return n.html=[...a.map(l=>l.value),...s.map(l=>`<script type="text/javascript">${l.value}<\/script>`)].join(`
`),n}const Ns="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let As=(e=21)=>{let t="",n=crypto.getRandomValues(new Uint8Array(e));for(;e--;)t+=Ns[n[e]&63];return t};function Ts(e){let t=e.replaceAll("-gray-","-zinc-");return t=t.replaceAll("via.placeholder.com","placehold.co"),t}function Lt(e){try{const{childNodes:t}=e;for(let n=t.length-1;n>=0;n-=1){const r=t[n];r.nodeType===Node.COMMENT_NODE?r.remove():r.nodeType===Node.ELEMENT_NODE&&Lt(r)}}catch(t){console.error(t)}}function Yn(e){return console.log("New Chapter called",e),`

---
prompt: ${e}
---

`}function Mt({shared:e}){const t=Xn(),[n,r]=Dt(),i=Bt(),a=t.id??"new",[s,o]=fe(br),[h,l]=I.useState(s),[f,u]=fe(Ve({id:a})),[g,c]=fe(st),[E,T]=fe(lt),[M,k]=fe(ot),[P,y]=fe(nt),D=ur(),H=Fe(kr),b=Fe(yr),w=Fe(wr),A=I.useRef(null),v=I.useRef(null),B=I.useRef(null),C=(f.markdown??"").split(/---\nprompt:.+\n---/gm).pop(),[j,_]=I.useState(C??""),[Q,F]=I.useState(),[U,G]=I.useState(f.html??""),[re,K]=I.useState(),[d,Y]=I.useState([]),[he,m]=I.useState(),[X,le]=I.useState(j!==""),[Z,ie]=I.useState(!1),[ae,ge]=I.useState(j!==""),xe=jr(j),ze=Cr(`(min-width: ${zr}px)`);I.useEffect(()=>{},[U,f]),I.useEffect(()=>{e&&(async()=>{const z=await cr(a);u(z),G(z.html??"")})().catch(z=>{console.error(z),setTimeout(()=>K(z.toString()),1e3)})},[e,a,u]),I.useEffect(()=>{h.length!==s.length&&(D(),l(s))},[s,h.length,D]),I.useEffect(()=>{le((j||"").trim()!=="")},[j]),I.useEffect(()=>{if(t.id==="new"){K(void 0),c(""),_(""),Y([]),ge(!1);return}window._item=f,_((f.markdown??"").split(/---\nprompt:.+\n---/gm).pop()??"")},[t.id]);const _e=I.useCallback(z=>{z.trim()!==""&&(console.log("Saving:",z),u($=>({...$,markdown:($.markdown??"")+z})),D())},[D,u]),Ee=I.useCallback((z,$,V=!1)=>{ie(!0),_(""),c(""),K(void 0),hr({query:z??"image-upload",model:H,systemPrompt:w,html:V?void 0:$,image:V?void 0:Q,temperature:b},J=>{_(be=>(be||"")+J)}).then(J=>{F(void 0),ie(!1),_e(J),v.current&&(v.current.value="")}).catch(J=>{ie(!1),F(void 0),_e(""),console.error(J),K(J.message)})},[H,Q,w,_,ie,K,F,c,_e,b]);I.useEffect(()=>{const z=n.get("gen")==="1",$=n.get("clear")==="true";z&&!f.markdown&&!Z&&(r(new URLSearchParams,{preventScrollReset:!0,replace:!0}),Ee(f.prompt,void 0,$))},[f,Z,r,n,Ee]),I.useEffect(()=>{try{if(!j||t.id==="new"){G("");return}K(void 0);const z=vs(j,{name:f.name,emoji:f.emoji});z.html?(u($=>({...$,...z})),G(Ts(z.html))):Z||K("No HTML in response.  View the response in the chat history.")}catch(z){u($=>({...$,name:"Error"})),console.error(z)}},[xe]),I.useEffect(()=>{if(M!==""){const z=new Image;z.addEventListener("load",()=>{m(z)}),z.src=M}},[M]),I.useEffect(()=>{const z=V=>{V.shiftKey&&le(!1)},$=V=>{V.key==="Shift"&&le(j!=="")};return document.addEventListener("keydown",z),document.addEventListener("keyup",$),()=>{document.removeEventListener("keydown",z),document.removeEventListener("keyup",$)}},[j]);const Ie=I.useCallback((z,$=!0)=>{const V=As();v.current&&(v.current.value=z),_(""),Ve({id:V,prompt:z,createdAt:new Date}),o(J=>[V,...J]),i(`/ai/${V}?gen=1&clear=${$}`)},[i,o]),De=async z=>{var J;z.preventDefault();let $=!0;(!j||z.shiftKey)&&($=!1);let V="html-comments-only";z.target instanceof HTMLFormElement?V=((J=new FormData(z.target).get("query"))==null?void 0:J.toString())??"":V=z.target.value,$?(_(""),console.log("Submit",f.name),u(be=>({...be,markdown:be.markdown+Yn(V),prompts:[...be.prompts??[be.prompt],V]})),Ee(V,U)):Ie(V)};function We(z){const $=z.querySelectorAll("script"),V=[];for(const J of $)V.push({text:J.innerHTML,src:J.src,type:J.type});return V}return I.useEffect(()=>{if(t.id==="new"){G("");return}const $=new DOMParser().parseFromString(U,"text/html");Lt($.body),u(V=>({...V,html:$.body.innerHTML})),Y(We($))},[U,u,t.id,f.name]),I.useEffect(()=>{if(!P)return;const z=P;y(void 0),ie(!0);const $=f.components??{};dr({model:H,framework:z,html:U,temperature:b},V=>{u(J=>($[z]===void 0&&($[z]=""),$[z]+=V,{...J,components:{...$}}))}).then(()=>{D(),ie(!1)}).catch(V=>{ie(!1),console.error(V)})},[P,u,D,y,f.components,H,U,b]),I.useEffect(()=>{M!==""?(Ie("image-upload",!1),F(M),k("")):g!==""&&(console.log("Auto Submit",f.name),u(z=>({...z,markdown:z.markdown+Yn(E[0])})),T([]),Ee("html-comments-only",g))},[g,E,Ie,M,c,T,u,f.name,k,Ee]),p.jsxs("div",{className:"flex-col bg-secondary",children:[p.jsxs("div",{className:"p-2",children:[p.jsx(gt,{id:a,html:U,js:d,error:re,imageUploadRef:A,rendering:Z}),p.jsx(Tr,{id:a,code:U,shared:e??!1}),s.length<=2&&p.jsx(ct,{className:we("absolute left-[calc(50%)] w-11/12 -translate-x-1/2",ae&&"-bottom-10 opacity-0"),style:{bottom:ze?"130px":"230px"},callback:z=>{Ie(z)}})]}),p.jsx(je,{onClick:()=>{const z=!ae;ge(z),v.current&&!z&&v.current.focus()},variant:"ghost",size:"icon",className:"absolute left-[calc(50%-1.25rem)] z-10 hover:scale-125 hover:animate-pulse hover:bg-transparent",style:{bottom:`${ze?10:100}px`},children:ae?p.jsx(fr,{className:"inline-block h-5 w-5"}):p.jsx(mr,{className:"inline-block h-5 w-5"})}),p.jsxs(Ot,{onSubmit:De,className:"",ref:B,children:[p.jsx("input",{ref:A,id:"file-input",type:"file",className:"hidden",accept:"image/*"}),p.jsxs("div",{id:"llm-input",className:we("absolute left-[calc(50%)] z-0 flex w-11/12 -translate-x-1/2 justify-center rounded-full bg-background px-8 py-4 align-middle transition-all duration-500 lg:max-w-full",ae&&"translate-y-24 opacity-0"),style:{bottom:`${ze?45:145}px`},children:[p.jsx(pr,{name:"query",rows:1,className:"min-h-[41px] min-w-0 flex-1 resize-none rounded-none border-none text-base focus-visible:ring-0 focus-visible:ring-offset-0",placeholder:X?"Ask for changes to the current UI":"Describe a UI you desire",ref:v,onKeyDown:z=>{z.key==="Enter"&&De(z).catch($=>console.error($))}}),p.jsx("div",{className:"flex items-center",children:Z?p.jsx("div",{className:"h-8 w-8 flex-none animate-spin rounded-full bg-gradient-to-r from-purple-500 via-pink-500 to-red-500"}):p.jsx(je,{className:"h-8 w-8 flex-none",variant:"outline",size:"icon",type:"submit",children:X?p.jsx(gr,{className:"h-4 w-4"}):p.jsx(xr,{className:"h-4 w-4"})})})]})]})]})}Mt.defaultProps={shared:!1};const Ps=Object.freeze(Object.defineProperty({__proto__:null,default:Mt},Symbol.toStringTag,{value:"Module"}));export{Ps as B,te as V,ce as a,ys as b,ss as r,Cs as u};
